<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:wi="http://www.itx.com.br/jsf"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:infox="http://www.infox.com.br/jsf"
    xmlns:rich="http://richfaces.org/rich"
    template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">

    <ui:define name="title">#{infoxMessages['solicitante.titlePage']}</ui:define>

    <ui:define name="body">
    	<h:form id="solicitanteForm">
    		<p:panel id="panelSolicitante" style="border-width: 1px; border-style: solid;"
				header="#{infoxMessages['solicitante.titlePage']}">
				<p:outputPanel id="panelConsultaTurmalina" styleClass="panelConsultaTurmalina">
					<wi:field id="cpf" required="true"
						label="#{infoxMessages['solicitante.cpf']}">
						<p:inputMask id="cpfInput"
							mask="999.999.999-99"
							size="14"
							value="#{solicitanteView.solicitanteVO.cpf}">
	                        <f:validator validatorId="cpfValidator" />
	                        <f:converter converterId="cpfConverter" />
						</p:inputMask>
					</wi:field>

					<wi:field id="matricula"
						label="#{infoxMessages['solicitante.matricula']}">
						<p:inputText id="matriculaInput"
							size="14"
							maxlength="10"
							value="#{solicitanteView.solicitanteVO.matricula}" />
					</wi:field>

					<p:commandButton id="consultarTurmalinaBtn"
						update="panelDadosSolicitante"
						process="@this"
						action="#{solicitanteView.consultarTurmalina()}"
						onclick="infox.showLoading();"
						oncomplete="infox.hideLoading();"
						value="#{infoxMessages['solicitante.consultarTurmalina']}"
						styleClass="buttons buttons-primary" />
				</p:outputPanel>

				<p:outputPanel id="panelDadosSolicitante" styleClass="panelDadosSolicitante">
					<wi:field id="nomeCompleto" required="true"
						label="#{infoxMessages['solicitante.nomeCompleto']}">
						<p:inputText id="nomeCompletoInput"
							required="true"
							size="30"
							maxlength="256"
							value="#{solicitanteView.solicitanteVO.nomeCompleto}" />
					</wi:field>

					<wi:field id="genero" required="true"
	                	label="#{infoxMessages['solicitante.genero']}">
	                    <h:selectOneMenu id="generoInput"
	                    	required="true"
	                        value="#{solicitanteView.solicitanteVO.sexo}">
	                        <f:selectItem noSelectionOption="true"
	                        	itemValue="#{null}"
	                            itemLabel="#{messages['crud.select.select']}" />
	                        <f:selectItems
	                         	value="#{selectItemFunctions.createFromString('M:Masculino,F:Feminino')}" />
	                    </h:selectOneMenu>
					</wi:field>

					<wi:field id="dataNascimento" required="true"
						label="#{infoxMessages['solicitante.dataNascimento']}">
						<p:calendar id="dataNascimentoInput"
							required="true"
							maxdate="#{now}"
							pattern="dd/MM/yyyy"
							placeholder="__/__/____"
							mask="99/99/9999"
							value="#{solicitanteView.solicitanteVO.dataNascimento}">
							<f:validator validatorId="pastDateValidator" />
							<p:ajax event="dateSelect" process="@this" />
							<p:ajax event="change" process="@this" />
							<p:ajax event="blur" process="@this" />
						</p:calendar>
					</wi:field>

					<fieldset style="display: inline;">
						<legend>#{infoxMessages['gerenciadorRg.rg']}<span style="color: red;"> *</span></legend>
                       	<wi:field id="numeroRg"
	                    	label="#{infoxMessages['gerenciadorRg.numero']}">
	                        <p:inputNumber
	                            id="numeroRgInput"
	                            required="true"
	                            size="10"
	                            maxlength="20"
	                            decimalPlaces="0"
	                            requiredMessage="Campo ObrigatÃ³rio"
	                            value="#{solicitanteView.solicitanteVO.numeroRg}" />
	                    </wi:field>

	                    <wi:field id="emissorRg"
	                        label="#{infoxMessages['gerenciadorRg.orgaoEmissor']}">
	                        <p:inputText
	                            id="emissorRgInput"
	                            required="true"
	                            size="10"
	                            maxlength="256"
	                            value="#{solicitanteView.solicitanteVO.emissorRg}" />
	                    </wi:field>

	                    <wi:field id="ufRg"
	                        label="#{infoxMessages['gerenciadorRg.uf']}">
	                        <h:selectOneMenu id="ufRgInput"
	                            required="true"
	                            value="#{solicitanteView.solicitanteVO.ufRg}">
	                            <f:selectItem noSelectionOption="true"
	                                itemValue="#{null}"
	                                itemLabel="#{messages['crud.select.select']}" />
	                            <f:selectItems var="itemUf"
	                            	value="#{solicitanteView.estadosList}" />
	                            <f:converter
	                                converterId="br.com.infox.jsf.converter.SelectItemConverter" />
	                        </h:selectOneMenu>
	                    </wi:field>
					</fieldset>

					<wi:field id="nomeMae" required="true"
						label="#{infoxMessages['solicitante.nomeMae']}">
						<p:inputText id="nomeMaeInput"
							required="true"
							size="30"
							maxlength="256"
							value="#{solicitanteView.solicitanteVO.nomeMae}" />
					</wi:field>

					<wi:field id="email" required="true"
						label="#{infoxMessages['solicitante.email']}">
						<p:inputText id="emailInput"
							required="true"
							size="30"
							maxlength="256"
							value="#{solicitanteView.solicitanteVO.email}">
							<f:validator validatorId="emailValidator" />
						</p:inputText>
					</wi:field>

					<wi:field id="telefone"
						label="#{infoxMessages['solicitante.telefone']}">
						<p:inputMask id="telefoneInput"
	                        mask="+999 (99) 9 9999 9999"
							size="22"
							value="#{solicitanteView.solicitanteVO.telefone}" />
					</wi:field>

					<ui:include src="/Endereco/gerenciador.xhtml">
						<ui:param name="idForm" value="#{idForm}" />
					</ui:include>

					<div style="margin-bottom: 10px" />

	                <s:div styleClass="required-alert" rendered="true">
	                    <img src="#{pathResolver.contextPath}#{layoutController.getResourceUrlByPath('/imagens/mod/balao.png')}" />
	                    <span class="required">*</span>
	                    <span>#{infoxMessages['form.required']}</span>
	                </s:div>
				</p:outputPanel>
			</p:panel>

			<p:outputPanel id="panelButtons" styleClass="panelButtons">
				<p:commandButton id="incluirBtn"
					update="panelSolicitante, pageBodyDialogMessage"
					process="@form"
					action="#{solicitanteView.gravar()}"
					onclick="infox.showLoading();"
					oncomplete="infox.hideLoading();"
					value="#{infoxMessages['crud.persist']}"
					rendered="#{empty solicitanteView.solicitanteVO.id}"
					styleClass="buttons buttons-primary" />

				<p:commandButton id="atualizarBtn"
					update="panelSolicitante pageBodyDialogMessage"
					process="@form"
					action="#{solicitanteView.atualizar()}"
					onclick="infox.showLoading();"
					oncomplete="infox.hideLoading();"
					value="#{infoxMessages['crud.update']}"
					rendered="#{not empty solicitanteView.solicitanteVO.id}"
					styleClass="buttons buttons-primary" />

				<p:commandButton id="novoBtn"
					update="panelSolicitante"
                    process="@this"
                    resetValues="true"
					action="#{solicitanteView.novo()}"
					onclick="infox.showLoading();"
					oncomplete="infox.hideLoading();"
					value="#{infoxMessages['crud.new']}"
					styleClass="buttons buttons-primary" />
			</p:outputPanel>
		</h:form>
	</ui:define>
</ui:composition>
