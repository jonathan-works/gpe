<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:infox="http://www.infox.com.br/jsf"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf"
    template="/WEB-INF/xhtml/templates/core/menuTemplate.xhtml"
>
<ui:define name="body">
<style>
.termo-adesao-container {
    display: flex;
    flex-direction: column;
    height: 100%;
}
</style>

<infox:tabPanel
    switchType="ajax"
    activeTab="#{detalheUsuarioView.tab}"
    id="detalhesUsuarioTabs"
>
    <h:form>
        <infox:tabHeaders />
    </h:form>

    <infox:tab 
        id="info"
        name="informacoes"
        title="#{infoxMessages['detalhesUsuario.titlePage']}"
    >
        <wi:panel id="panelImpressaoComunicacoes">
            <p:outputPanel
                styleClass="panelImpressaoComunicacoesContainer"
            >
            <wi:outputText
                id="nomeUsuario"
                value="#{detalheUsuarioView.nome}"
                label="#{infoxMessages['detalhesUsuario.nomeUsuario']}"
            />
            
            <h:panelGroup rendered="#{detalheUsuarioView.botaoGerarCertificadoDesabilitado}">
                <wi:outputText
                    id="dataInicio"
                    value="#{detalheUsuarioView.dataInicio}"
                    label="#{infoxMessages['detalhesUsuario.dataInicio']}"
                />
                <wi:outputText
                    id="dataFim"
                    value="#{detalheUsuarioView.dataFim}"
                    label="#{infoxMessages['detalhesUsuario.dataFim']}"
                />
            </h:panelGroup>
            
            <h:panelGroup rendered="#{not detalheUsuarioView.botaoGerarCertificadoDesabilitado}">
                <h:form>
                    <p:commandButton
                        action="#{detalheUsuarioView.gerarCertificado}"
                        ajax="true"
                        partialSubmit="true"
                        onclick="showLoading()"
                        oncomplete="hideLoading()"
                        value="Gerar certificado"
                        update="@(.panelImpressaoComunicacoesContainer) :pageBodyDialogMessage"
                        styleClass="buttons buttons-primary"
                    />
                </h:form>
            </h:panelGroup>
            
            <div>
                <h:outputText value="#{infoxMessages['detalhesUsuario.termo']}:" style="font-weight: bold;"/>
            </div>
            <div class="termo-adesao-container">
            <object 
                type="application/pdf"
                class="termo-adesao"
                data="#{detalheUsuarioView.urlTermoAdesao}"
                style="height: 500px"
            >
                <a href="#{detalheUsuarioView.urlTermoAdesao}">Download</a>
            </object>
            </div>
            </p:outputPanel>
        </wi:panel>
    </infox:tab>
</infox:tabPanel>
    
</ui:define>
</ui:composition>
