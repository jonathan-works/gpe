<components xmlns="http://www.jboss.org/schema/seam/components" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.jboss.org/schema/seam/core http://www.jboss.org/schema/seam/core-2.3.xsd                   http://www.jboss.org/schema/seam/security http://www.jboss.org/schema/seam/security-2.3.xsd                  http://www.jboss.org/schema/seam/components http://www.jboss.org/schema/seam/components-2.3.xsd">	

<!-- $Id: fluxoAssuntoGrid.component.xml 704 2010-08-12 23:21:10Z jplacerda $ -->


	<component name="fluxoAssuntoGrid" class="br.com.itx.component.grid.GridQuery">
		<property name="ejbql">
		    select o from Assunto o where o.ativo = true
		</property>
		<property name="maxResults">16</property>
		<property name="gridId">assunto</property>
		<property name="key">idAssunto</property>
		<property name="columns">
			<value>assuntoPai</value>			
			<value>assunto</value>			
			<value>ativo</value>			
			<value>codAssunto</value>			
		</property>
		<property name="restrictions">
			<value> 
			exists
			 (select t.assunto
			  from Fluxo a join a.assuntoList t
			  where a.idFluxo = #{fluxoHome.instance.idFluxo}
			  		and t.assunto = o.assunto)
			</value>
			<value>assunto.idAssunto = #{assuntoSearchTree1.selected.idAssunto} OR assuntoPai.idAssunto = :el1</value>
			<value>lower(assunto) like concat('%', concat (lower(#{assuntoSearch.assunto}),'%'))</value>
		</property>		
		<property name="searchFields">
			<value>assunto: {type : tree, properties: {tree: assuntoSearchTree1, switchType: ajax}}</value>
			<value>assunto</value>
		</property>
		<property name="order">assunto</property>
	</component>
	
	<component name="fluxoAssuntoSearch" class="br.com.infox.ibpm.entity.Assunto" />	
	
	<component name="fluxoAssuntoSearchTree1" class="br.com.infox.ibpm.component.tree.AssuntoTreeHandler">
		<property name="iconFolder">/img/nivelTree.gif</property>
		<property name="iconLeaf">/img/file.gif</property>
	</component>
	
</components>
