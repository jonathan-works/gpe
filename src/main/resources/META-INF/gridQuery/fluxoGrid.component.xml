<components xmlns="http://jboss.com/products/seam/components" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jboss.com/products/seam/core http://jboss.com/products/seam/core-2.2.xsd                   http://jboss.com/products/seam/security http://jboss.com/products/seam/security-2.2.xsd                  http://jboss.com/products/seam/components http://jboss.com/products/seam/components-2.2.xsd">

<!-- $Id: fluxoGrid.component.xml 704 2010-08-12 23:21:10Z jplacerda $ -->


	<component name="fluxoGrid" class="br.com.itx.component.grid.GridQuery">
		<property name="ejbql">select o from Fluxo o</property>
		<property name="maxResults">16</property>
		<property name="gridId">fluxo</property>
		<property name="key">idFluxo</property>
		<property name="columns">
			<value>fluxo</value>		
			<value>codFluxo</value>			
			<value>qtPrazo: {valueType: number}</value>			
			<value>publicado: {valueType: sim_nao}</value>			
			<value>dataInicioPublicacao: {valueType: date, properties: {pattern: "dd/MM/yy"}}</value>			
			<value>dataFimPublicacao: {valueType: date, properties: {pattern: "dd/MM/yy"}}</value>			
			<value>usuarioPublicacao</value>			
			<value>ativo: {valueType: ativo}</value>			
		</property>
		<property name="restrictions">
			<value>lower(fluxo) like concat('%', lower(#{fluxoSearch.fluxo}),'%')</value>
			<value>lower(codFluxo) like concat('%', lower(#{fluxoSearch.codFluxo}),'%')</value>
			<value>ativo = #{fluxoSearch.ativo}</value>
			<value>o not in (select list from Variavel obj join obj.fluxoList list
					where obj.idVariavel = #{variavelHome.definedInstance.idVariavel})
			</value> 
			<value>usuarioPublicacao.idPessoa = #{usuarioHome.id}</value>
		</property>		
		<property name="searchFields">
			<value>ativo: {type: comboSituacao}</value>
			<value>fluxo</value>
			<value>codFluxo</value>
		</property>
		<property name="order">fluxo</property>
	</component>

	<component name="fluxoSearch" class="br.com.infox.ibpm.entity.Fluxo" />	
</components>
