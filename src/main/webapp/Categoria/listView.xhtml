<?xml version="1.0" encoding="UTF-8"?>
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
-->
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:infox="http://www.infox.com.br/jsf"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf"
    template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">


    <ui:define name="title">#{messages['categoria.titlePage']}</ui:define>
    <ui:param
        name="home"
        value="#{categoriaCrudAction}" />
    <ui:param
        name="crudAction"
        value="#{categoriaCrudAction}" />    
    <ui:define name="searchGrid">
        <wi:dataTable
            values="#{categoriaList.list(15)}"
            bean="#{categoriaList}"
            tableTitle="#{messages['categoria.titleGrid']}"
            id="categoriaList"
            rowId="#{row.idCategoria}"
            actionInactive="categoriaCrudAction.inactive">
            <ui:define name="searchForm">
                <wi:searchForm
                    formId="pesquisarCategoriaForm"
                    formTitle="#{messages['searchForm.title']}">
                    <wi:inputText
                        id="categoria"
                        value="#{categoriaList.entity.categoria}"
                        label="#{messages['categoria.categoria']}" />
                    <wi:selectSituacaoOneMenu
                        id="ativo"
                        label="#{messages['field.situacao']}"
                        value="#{categoriaList.entity.ativo}" />
                </wi:searchForm>
            </ui:define>
            <ui:define name="toolBar">
                <wi:toolBarEdit id="categoriaListEditToolbar" />
                <wi:toolBarInactive
                    actionInactive="categoriaCrudAction.inactive(row)" />
            </ui:define>
            <wi:columnOutputText
                columnId="categoria"
                columnHeader="#{messages['categoria.categoria']}"
                value="#{row.categoria}" />
            <wi:columnSituacao
                columnId="ativo"
                columnHeader="#{messages['field.situacao']}"
                value="#{row.ativo}" />
        </wi:dataTable>
    </ui:define>
    <ui:define name="form">
        <wi:dataForm
            formId="categoriaForm"
            formTitle="#{messages['form.title']}">
            <wi:inputText
                id="categoria"
                value="#{crudAction.instance.categoria}"
                required="true"
                label="#{messages['categoria.categoria']}" />
            <wi:selectSituacaoRadio
                id="ativo"
                required="false"
                label="#{messages['field.situacao']}"
                value="#{crudAction.instance.ativo}" />
        </wi:dataForm>
    </ui:define>
    <ui:define name="tabs">
        <infox:tab
            id="categoriaItemTab"
            rendered="#{crudAction.isManaged()}"
            title="#{messages['categoriaItem.titleTab']}"
            name="categoriaItemTab">
            <s:div id="categoriaItemFormDiv">
                <wi:dataForm
                    formId="categoriaItemForm"
                    formTitle="#{messages['form.title']} #{crudAction.instance.categoria}">
                    <wi:tree
                        id="itemTree"
                        assignTo="categoriaCrudAction.itemASerAdicionado"
                        tree="#{itemTree}"
                        required="true"
                        label="#{messages['categoriaItem.item']}" />
                    <ui:define name="buttons">
                        <wi:commandButton
                            id="saveButton"
                            action="categoriaCrudAction.addCategoriaItem()"
                            reRender="categoriaItemFormDiv, categoriaItemDiv, categoriaItemTab"
                            value="#{messages['crud.persist']}" />
                    </ui:define>
                </wi:dataForm>
            </s:div>
            <s:div id="categoriaItemDiv">
                <wi:dataTable
                    id="categoriaItemTable"
                    values="#{crudAction.instance.categoriaItemList}"
                    var="row"
                    rows="10">
                    <f:facet name="header">
                        <h:outputText
                            value="#{messages['categoriaItem.titleDataTable']} - #{crudAction.instance.categoria}" />
                    </f:facet>
                    <ui:define name="headerToolBar" />
                    <ui:define name="toolBar">
                        <wi:toolBarRemove
                            id="toolBarRemove"
                            reRender="categoriaItemFormDiv, categoriaItemDiv"
                            actionRemove="categoriaCrudAction.removeCategoriaItem(row)" />
                    </ui:define>
                    <wi:columnOutputText
                        columnId="item"
                        columnHeader="#{messages['categoriaItem.item']}"
                        value="#{row.item.caminhoCompletoToString()}"
                        hideOrder="true">
                        
                    </wi:columnOutputText>
                </wi:dataTable>

            </s:div>
        </infox:tab>
    </ui:define>
</ui:composition>