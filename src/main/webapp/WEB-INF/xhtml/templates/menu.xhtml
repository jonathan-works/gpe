<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: menu.xhtml 750 2010-08-24 14:10:58Z danielsilva $ -->
<ui:composition
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:wi="http://www.itx.com.br/jsf">

	<h:form>
		<a:jsFunction
			status="status"
			name="refreshPage"
			render="pageBody" />
	</h:form>

	<ui:param
		name="mostrarMenu"
		value="#{identity.loggedIn and !usuarioLogado.provisorio}" />
	<script type="text/javascript">
		$(document).ready(function() {
			$(".LinkMenu").addClass("rf-ddm-lbl rf-ddm-unsel").hover(function() {
				$(this).toggleClass("rf-ddm-unsel").toggleClass("rf-ddm-sel");
			});
		});
	</script>
	<rich:toolbar styleClass="menu-tb">
		<c:if test="#{mostrarMenu}">
			<rich:toolbarGroup>
				<h:form>
					<s:link
						view="/home.xhtml"
						styleClass="LinkMenu"
						value="Home" />
				</h:form>
			</rich:toolbarGroup>
			<c:forEach
				items="#{mainMenu.dropMenus}"
				var="drop">
				<h:form rendered="#{empty drop.url}">
					<rich:dropDownMenu label="#{drop.label}">
						<ui:include src="/WEB-INF/xhtml/templates/subMenu.xhtml">
							<ui:param
								name="subMenu"
								value="#{drop}" />
						</ui:include>
					</rich:dropDownMenu>
				</h:form>
				<h:form rendered="#{!empty drop.url}">
					<rich:menuItem
						submitMode="server"
						label="#{drop.label}"
						action="#{drop.url}">
						<s:conversationPropagation type="end" />
					</rich:menuItem>
				</h:form>
			</c:forEach>
		</c:if>
		<rich:toolbarGroup location="right">
			<h:form>
				<s:link view="/login.xhtml"
						value="Login"
						styleClass="LinkMenu"
						rendered="#{not identity.loggedIn}"/>
				<s:link
					view="/home.xhtml"
					action="#{identity.logout}"
						styleClass="LinkMenu"
					value="Logout"
					rendered="#{identity.loggedIn}" />
			</h:form>
			<wi:helpIcon />
		</rich:toolbarGroup>
	</rich:toolbar>

</ui:composition>
