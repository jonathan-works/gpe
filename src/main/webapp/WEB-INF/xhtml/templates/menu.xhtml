<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- $Id: menu.xhtml 750 2010-08-24 14:10:58Z danielsilva $ --><ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:a="http://richfaces.org/a4j"
     xmlns:c="http://java.sun.com/jsp/jstl/core"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:rich="http://richfaces.org/rich"
     xmlns:s="http://jboss.org/schema/seam/taglib"
     xmlns:wi="http://www.itx.com.br/jsf">

	<h:form>
	 	<a:jsFunction
             status="status"
             name="refreshPage"
             reRender="pageBody" />
    </h:form>
    
	<ui:param
         name="mostrarMenu"
         value="#{identity.loggedIn and !usuarioLogado.provisorio}" />

	<rich:toolbar
         width="100%">
		<c:if
             test="#{mostrarMenu}">
			<rich:toolbarGroup>
				<s:link
                     view="/home.xhtml"
                     style="color:#{a4jSkin.headerTextColor}; font-size:#{skinZoom.skinZoom};"
                     value="Home" />				
			</rich:toolbarGroup>
			<c:forEach
                 items="#{mainMenu.dropMenus}"
                 var="drop">
				<c:if
                     test="#{empty drop.url}">
					<h:form>
						<rich:dropDownMenu
                             value="#{drop.label}">
							<ui:include
                                 src="/WEB-INF/xhtml/templates/subMenu.xhtml">
								<ui:param
                                     name="subMenu"
                                     value="#{drop}" />
							</ui:include>
						</rich:dropDownMenu>
					</h:form>
				</c:if>
				<c:if
                     test="#{!empty drop.url}">
					<h:form>
						<rich:menuItem
                             submitMode="server"
                             value="#{drop.label}"
                             action="#{drop.url}">
							<s:conversationPropagation
                                 type="end" />
						</rich:menuItem>
					</h:form>
				</c:if>
			</c:forEach>
		</c:if>
		<rich:toolbarGroup
             location="right">
			<s:link
                 view="/login.xhtml"
                 value="Login"
                 style="color:#{a4jSkin.headerTextColor}"
                 rendered="#{not identity.loggedIn}" />
			<s:link
                 view="/home.xhtml"
                 action="#{identity.logout}"
                 style="color:#{a4jSkin.headerTextColor}; font-size:#{skinZoom.skinZoom};"
                 value="Logout"
                 rendered="#{identity.loggedIn}" />
			<wi:helpIcon />								
		</rich:toolbarGroup>
	</rich:toolbar>

</ui:composition>
