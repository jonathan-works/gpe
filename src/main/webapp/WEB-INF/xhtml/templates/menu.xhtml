<?xml version="1.0" encoding="ISO-8859-1"?>

<!-- $Id: menu.xhtml 750 2010-08-24 14:10:58Z danielsilva $ -->


<ui:composition	xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:wi="http://www.itx.com.br/jsf"
				xmlns:a="http://richfaces.org/a4j"
				xmlns:c="http://java.sun.com/jstl/core"
				xmlns:s="http://jboss.org/schema/seam/taglib"
				xmlns:rich="http://richfaces.org/rich">

	<a:form>
	 	<a:jsFunction status="status"
			      	  name="refreshPage" 
			      	  reRender="pageBody" />
    </a:form>
    
	<ui:param name="mostrarMenu"
		value="#{identity.loggedIn and !usuarioLogado.provisorio}" />

	<rich:toolBar width="100%">
		<c:if test="#{mostrarMenu}">
			<rich:toolBarGroup>
				<s:link view="/home.xhtml" 
				        style="color:#{a4jSkin.headerTextColor}; font-size:#{skinZoom.skinZoom};"
					value="Home" />				
			</rich:toolBarGroup>
			<c:forEach items="#{mainMenu.dropMenus}" var="drop">
				<c:if test="#{empty drop.url}">
					<h:form>
						<rich:dropDownMenu value="#{drop.label}">
							<ui:include src="/WEB-INF/xhtml/templates/subMenu.xhtml">
								<ui:param name="subMenu" value="#{drop}" />
							</ui:include>
						</rich:dropDownMenu>
					</h:form>
				</c:if>
				<c:if test="#{!empty drop.url}">
					<h:form>
						<rich:menuItem submitMode="server" 
							value="#{drop.label}"
							action="#{drop.url}">
							<s:conversationPropagation type="end" />
						</rich:menuItem>
					</h:form>
				</c:if>
			</c:forEach>
		</c:if>
		<rich:toolBarGroup location="right">
			<s:link view="/login.xhtml" value="Login"
				style="color:#{a4jSkin.headerTextColor}"
				rendered="#{not identity.loggedIn}" />
			<s:link view="/home.xhtml" 
			        action="#{identity.logout}"
				    style="color:#{a4jSkin.headerTextColor}; font-size:#{skinZoom.skinZoom};" 
				    value="Logout"
				    rendered="#{identity.loggedIn}" />
			<wi:helpIcon />								
		</rich:toolBarGroup>
	</rich:toolBar>

</ui:composition>
