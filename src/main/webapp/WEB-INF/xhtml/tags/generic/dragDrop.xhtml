<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
--><ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:a="http://richfaces.org/a4j"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:rich="http://richfaces.org/rich"
     xmlns:s="http://jboss.org/schema/seam/taglib"
     xmlns:wi="http://www.itx.com.br/jsf">
    <h:outputStylesheet
        library="styleSkinInfox"
        name="dragDrop.css" />
	<rich:dragIndicator id="#{id}Indicator" />
	<h:form id="#{id}dragDropForm">
		<h:panelGrid
             columnClasses="drag-p-c"
             columns="4"
             width="100%">

            <rich:panel
                 id="#{id}Panel"
                 > 
                <f:facet
                     name="header">
                    <h:outputText
                         value="#{headerDrag}" />
                </f:facet>
                
                <rich:dataTable
                     id="#{id}ListDrag"
                     value="#{bean.dragEntityList.list(10)}"
                     var="varDrag"
                     headerClass="drag-h">
                    <rich:column>
                        <a:outputPanel
                        	styleClass="drag-dt-p"
                            id="#{id}OutputPanel"
                            layout="block">
                            <rich:dragSupport
                                 dragIndicator="#{id}Indicator"
                                 dragType="TYPE"
                                 dragValue="#{varDrag}">
                                <rich:dndParam
                                     name="label"
                                     value="#{labelDrag}" />
                            </rich:dragSupport>
                            <ui:insert
                                 name="contentDrag" />
                        </a:outputPanel>
                    </rich:column>
                    
                </rich:dataTable>
                
                <s:div
                     rendered="#{bean.dragEntityList.previousExists or bean.dragEntityList.nextExists}">
					<h:form
                         ajaxSubmit="true">
						<rich:inputNumberSlider
                             enableManualInput="false"
                             showArrows="true"
                             value="#{bean.dragEntityList.page}"
                             step="1"
                             minValue="1"
                             width="250px"
                             maxValue="#{bean.dragEntityList.pageCount}"
                             showToolTip="true">
							<a:ajax
                                 event="change"
                                 status="status"
                                 execute="@this"
                                 limitRender="true"
                                 render="#{id}Panel" />
						</rich:inputNumberSlider>
					</h:form>
				</s:div>
            </rich:panel>
            
            <rich:panel
                 styleClass="drop-t-p">
                <f:facet
                     name="header">
                    <h:outputText
                         value="#{headerDrop}" />
                </f:facet>
                
                <rich:dropSupport
                     id="#{id}DropSupport"
                     acceptedTypes="TYPE"
                     dropValue="TYPE"
                     dropListener="#{bean.processDrop}"
                     reRender="#{id}Panel,#{id}TableDrop">
                </rich:dropSupport>

                <rich:dataTable
                     id="#{id}TableDrop"
                     value="#{bean.dropList}"
                     var="varDrop">
                    <rich:column>
                    	<wi:toolBar
                             action="#{util.getComponentName(bean).concat('.dropList.remove(varDrop)')}"
                             onclick="if(!confirm('Deseja remover este registro?')) return false;"
                             url="/img/remove.png"
                             title="Remover registro"
                             reRender="#{id}dragDropForm"
                              />
			        </rich:column>
                    <ui:insert
                         name="contentDrop" />
                </rich:dataTable>
                
            </rich:panel>
            
    	</h:panelGrid>
			
		<br />
		<ui:insert
             name="buttons">
			<a:commandButton
                 id="#{id}SaveButton"
                 value="Gravar"
                 action="#{util.invokeMethod(actionSave)}"
                 
                 styleClass="#{wi:get(styleClass, 'dr-tbpnl-tb-inact')}"
                 render="pageBody"
                 limitRender="true"/>
	                					  
	        <a:commandButton
                 id="#{id}ResetButton"
                 action="#{bean.dropList.clear()}"
                 value="Limpar"
                 
                 styleClass="#{wi:get(styleClass, 'dr-tbpnl-tb-inact')}"
                 render="#{id}Panel,#{id}TableDrop"
                 limitRender="true"/>
		 </ui:insert>
   	</h:form>
	   
</ui:composition>
