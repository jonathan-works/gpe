<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/ 
-->
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns="http://www.w3.org/1999/xhtml" xmlns:a="http://richfaces.org/a4j"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:s="http://jboss.org/schema/seam/taglib">

	<ui:param name="showDialogMessage"
		value="#{empty showDialogMessage ? true : showDialogMessage}" />
	<ui:param name="timeCloseMSG"
		value="#{empty timeCloseMSG ? '6000' : timeCloseMSG}" />

	<div id="dialogMessage" class="d-msg hidden">
		<div id="title" class="d-msg-h">
			<label class="d-msg-h-lbl">Mensagem</label>
			<h:graphicImage
				styleClass="d-msg-h-close"
				value="/img/closeMP.gif" />
		</div>
		<div class="d-msg-c">
			<h:messages id="#{formId}Message" globalOnly="true"/>
		</div>
	</div>
	<script type="text/javascript">
		//<![CDATA[
			var msgFuncs = msgFuncs || {
				showDialogMessage:function showDialogMessage() {
					$(".d-msg").removeClass("hidden");
				},
				hideDialogMessage:function hideDialogMessage() {
					$(".d-msg").addClass("hidden");
				},
				actionDialogMessage:function actionDialogMessage() {
					$(".d-msg-h-close").click(msgFuncs.hideDialogMessage);
					if (msgFuncs.existsGlobalMessages == 'true' 
							&& msgFuncs.existsMessage == 'true'
							&& $(".d-msg-c").text().trim()!== "") {
						msgFuncs.showDialogMessage();
						if ($('dt[class=rf-msgs-err]').html() == null) {
							setTimeout(msgFuncs.hideDialogMessage, msgFuncs.timeout);
						}
					}
				},
				existsGlobalMessages:'#{!facesMessages.currentGlobalMessages.isEmpty()}',
				existsMessage:'#{showDialogMessage}',
				timeout:"#{timeCloseMSG}"
			};
			
			if (window.jQuery) {
				msgFuncs.actionDialogMessage();
			} else {
				window.addEventListener("load",msgFuncs.actionDialogMessage);
			}
		//]]>
	</script>

</ui:composition>
