<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/ 
--><ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:a="http://richfaces.org/a4j"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:rich="http://richfaces.org/rich"
     xmlns:s="http://jboss.org/schema/seam/taglib">
				
	<ui:param
         name="showDialogMessage"
         value="#{empty showDialogMessage ? true : showDialogMessage}" />
	<ui:param
         name="timeCloseMSG"
         value="#{empty timeCloseMSG ? '6000' : timeCloseMSG}" />
				
	<script
         type="text/javascript">		
		function showDialogMessage() {
			element = document.getElementById("dialogMessage");
			element.style.visibility = "visible";
		}
		function hideDialogMessage() {
			element = document.getElementById("dialogMessage");
			element.style.visibility = "hidden";
		}	
		function actionDialogMessage() {
			var globalMessages = '#{!facesMessages.currentGlobalMessages.isEmpty()}';
			if(globalMessages == 'true') {	
				if('#{showDialogMessage}' == 'true') {		
					if($('dt[class=rf-msgs-err]').html() == null) {
						showDialogMessage();
						setTimeout("hideDialogMessage()", "#{timeCloseMSG}");					
					} else {
						showDialogMessage();
					}	
				}			
			}	
		}	
		//Executar o dialog ao fazer uma requisição AJAX ou NÃO-AJAX no formulário.	
		window.onload = function() {
			actionDialogMessage();	
		}		
		actionDialogMessage();
	</script>

	<div id="dialogMessage">
		<div id="title">
			Mensagem
			<h:graphicImage
                 style="padding-left: 218px; cursor: pointer;"
                 value="/img/closeMP.gif"
                 onclick="hideDialogMessage();" />	
    	</div>
    	<div> 
			<rich:messages
                 id="#{formId}Message"
                 globalOnly="true"
                 style="margin: 5px"/>
    	</div>
	</div>
	
</ui:composition>
