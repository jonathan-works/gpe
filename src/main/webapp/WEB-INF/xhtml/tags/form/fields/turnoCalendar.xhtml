<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
--><ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:a="http://richfaces.org/a4j"
     xmlns:c="http://java.sun.com/jsp/jstl/core"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:rich="http://richfaces.org/rich"
     xmlns:s="http://jboss.org/schema/seam/taglib"
     xmlns:wi="http://www.itx.com.br/jsf">
	
	<h:outputScript
         library="js"
         name="turnoCalendar.js" />
	<script>
	// <![CDATA[
	            
	    var turnoCalendar = new TurnoCalendar();
	    
		function markBeginOrEnd(row, col) {
			if (!turnoCalendar.isBeginMarked()) {
				if (turnoCalendar.isSelected(row, col)) {
					turnoCalendar.removeInterval(row, col);
				} else {
					turnoCalendar.markBegin(row, col);
				}
			} else {
				turnoCalendar.markEnd(row, col);
			}
		}
		
		function markInterval(row, col) {
			if (turnoCalendar.isBeginMarked()) {
				turnoCalendar.markInterval(row, col);
			}
		}
		
	// ]]>
	</script>
	
	<table
         class="rich-table"
         border="0"
         cellpadding="0"
         cellspacing="0">
		<tr
             class="rich-table-subheader">
			<th
                 class="rich-table-subheadercell"
                 > -
			</th>
			<ui:repeat
                 value="#{handler.diasSemana}"
                 var="dia">				
				<th
                     class="rich-table-subheadercell"
                     >
					#{dia}
				</th>
			</ui:repeat>
		</tr>
		<c:forEach
             items="#{handler.horarios}"
             var="horario"
             varStatus="rowStatus"
             begin="0"
             step="1">
			<tr
                 class="rich-table-row"
                 onmouseover="rowColor=this.style.backgroundColor; this.style.backgroundColor='#f1f1f1'"
                 onmouseout="this.style.backgroundColor=rowColor">
				<td
                     class="rich-table-cell"
                     >
					#{horario} - #{rowStatus.index lt handler.horarios.size()-1 ? handler.horarios.get(rowStatus.index + 1) : '00:00:00'}
				</td>
				<c:forEach
                     items="#{handler.diasSemana}"
                     var="dia"
                     varStatus="colStatus"
                     begin="0"
                     step="1">
					<ui:param
                         name="selected"
                         value="#{handler.getHorarioBean(dia, horario).selected}" /> 	
					<td
                         id="td_#{rowStatus.index}_#{colStatus.index}"
                         onclick="markBeginOrEnd(#{rowStatus.index}, #{colStatus.index})"
                         class="rich-table-cell #{selected ? 'fixed-selected': ''}"
                         
                         onmouseover="markInterval(#{rowStatus.index}, #{colStatus.index});">
						
						<h:selectBooleanCheckbox
                             id="check_#{rowStatus.index}_#{colStatus.index}"
                             
                             value="#{selected}" />
					</td>
				</c:forEach>
			</tr>
		</c:forEach>
	</table>
	
</ui:composition>
