<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns="http://www.w3.org/1999/xhtml" xmlns:a="http://richfaces.org/a4j"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:wi="http://www.itx.com.br/jsf">

	<h:panelGroup id="#{empty id ? 'divApplet' : id}">
		<s:fragment rendered="#{empty rendered ? true : rendered}">
			<script
				src="#{pathResolver.contextPath}/resources/js/certificadoDigital/constant.js" />
			<script
				src="#{pathResolver.contextPath}/resources/js/certificadoDigital/websocket.js" />
			<a
				href="#{pathResolver.contextPath}/certificado/certificado_digital.jnlp"
				onclick="Infox.CertDig.userClickedOnDownloadJNPLButton();">#{empty
				signButtonCaption ? 'Assinar Digitalmente' : signButtonCaption}</a>

			<h:outputScript>
			Infox.CertDig.Constant.Parameter = 
			{
				DEBUG                      : #{empty debug ? false : debug},

				LOGIN_MODE                 : #{empty loginMode ? false : loginMode},

				FORM_ID                    : "#{formId}",
				CERTIFICATION_CHAIN_FIELD  : "#{certificationChainField}",
				SIGNATURE_FIELD            : "#{signatureField}",
				GET_DATA_FUNCTION          : "#{getDataFunction}",
				
				FUNCTION_PRE_SIGN          : "#{functionPreSign}",
				FUNCTION_POS_SIGN          : "#{functionPosSign}",
				FUNCTION_POS_SIGN_OK       : "#{functionPosSignOk}",
				FUNCTION_POS_SIGN_ERROR    : "#{functionPosSignError}",
				
				DATA_ATUAL                 : "#{currentDatetime}",
				USE_BASE64_FUNCTION        : #{empty useBase64Function ? true : useBase64Function},
				USE_PROVIDER_DLL           : #{empty useProviderDll ? false : useProviderDll}
			};
			</h:outputScript>
		</s:fragment>
	</h:panelGroup>
</ui:composition>