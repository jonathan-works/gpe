<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
--><ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:a="http://richfaces.org/a4j"
     xmlns:c="http://java.sun.com/jsp/jstl/core"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:rich="http://richfaces.org/rich"
     xmlns:s="http://jboss.org/schema/seam/taglib"
     xmlns:wi="http://www.itx.com.br/jsf">
	
	<h:outputScript
         library="js"
         name="imageUpload.js" />
	
	<ui:param
         name="imageBean"
         value="#{wi:get(imageBean, imageFileUpload)}" />
	
	<s:div
         rendered="#{wi:get(rendered, true)}"
         style="#{wi:get(style, 'float: left; padding-left:3px')}">
		<rich:collapsiblePanel
             id="uploadImagem"
             switchType="ajax"
             opened="#{wi:get(opened, 'false')}"
             label="Álbum de imagens">
            <rich:fileUpload
                 fileUploadListener="#{imageBean.listener}"
                 id="upload"
                 ajaxSingle="true"
                 onupload="uploadHandler(event, '#{imageBean.imagePath}')"
                 onuploadcomplete="insert()"
                 autoclear="true"
                 maxFilesQuantity="10"
                 addControlLabel="Nova imagem"
                 clearAllControlLabel="Limpar todas"
                 clearControlLabel="Limpar"
                 stopEntryControlLabel="Parar"
                 uploadControlLabel="Processar"
                 listWidth="355px"
                 listHeight="0px"
                 immediateUpload="true"
                 noDuplicate="true"
                 status=":status"
                 allowFlash="false"
                 reRender="uploadImagem"
                 acceptedTypes="jpg, gif, png">
            </rich:fileUpload>
            <h:form>
	           	<rich:dataGrid
                     style="margin-left: 1px; width: 351px;"
                     value="#{imageBean.images}"
                     elements="30"
                     columns="6"
                     var="img">
	            	<s:div
                         style="text-align:center">
		            	<img
                             src="#{img}"
                             style="width:50px;"
                             title="Arraste para o documento" />
	            	</s:div>
		           	<f:facet
                         name="footer">
		                <rich:dataScroller />
		            </f:facet>
	           	</rich:dataGrid> 
            </h:form>
	</rich:collapsiblePanel> 
	</s:div>
	
</ui:composition>
