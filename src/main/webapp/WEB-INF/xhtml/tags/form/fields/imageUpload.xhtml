<?xml version="1.0" encoding="UTF-8"?>

<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
-->

<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:wi="http://www.itx.com.br/jsf"
	xmlns:rich="http://richfaces.org/rich">

	<h:outputScript
		library="js"
		name="imageUpload.js"
		/>

	<ui:param
		name="imageBean"
		value="#{wi:get(imageBean, imageFileUpload)}"
		/>

	<s:div
		rendered="#{wi:get(rendered, true)}"
		styleClass="img-upl-div"
		>
		<rich:collapsiblePanel
			id="uploadImagem"
			switchType="ajax"
			expanded="#{wi:get(opened, 'false')}"
			header="Álbum de imagens"
			>
			<rich:fileUpload
				id="upload"
				execute="@this"
				status=":status"
				limitRender="true"
				required="#{wi:get(required, false)}"
				fileUploadListener="#{imageBean.processFileUpload}"
				addLabel="Nova imagem"
				clearAllLabel="Limpar Todas"
				clearLabel="Limpar"
				uploadLabel="Processar"
				doneLabel="Enviado"
				onupload="uploadHandler(event, '#{imageBean.imagePath}')"
				onuploadcomplete="insert()"
				maxFilesQuantity="10"
				listHeight="0px"
				immediateUpload="true"
				noDuplicate="true"
				render="uploadImagem"
				acceptedTypes="jpg, gif, png"
				>
			</rich:fileUpload>
			<rich:dataGrid
				value="#{imageBean.images}"
				elements="30"
				columns="6"
				var="img"
				styleClass="d-grid-img"
				>
				<div class="grid-img-div">
					<img
						src="#{img}"
						class="grid-img"
						title="Arraste para o documento"
						onclick="infox.imageUpload.click(this,'#{wi:get(editorId, false)}')"
						></img>
				</div>
				<f:facet name="footer">
					<rich:dataScroller />
				</f:facet>
			</rich:dataGrid>
		</rich:collapsiblePanel>
	</s:div>

</ui:composition>