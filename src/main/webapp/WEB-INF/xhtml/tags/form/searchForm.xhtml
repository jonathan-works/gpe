<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
-->
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns="http://www.w3.org/1999/xhtml" xmlns:a="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:wi="http://www.itx.com.br/jsf">

	<ui:param name="clearAction"
		value="#{not empty clearAction ? clearAction : bean.entityListName.concat('.newInstance()')}" />
	<a:region id="#{formId}">
		<f:validateBean disabled="true">
			<rich:collapsiblePanel expanded="#{wi:get(opened, true)}"
				style="#{empty widthSearchForm ? 'width: 275px' : ''}" switchType="client">
				<f:facet name="closeMarker"> </f:facet>
				<f:facet name="header">#{empty formTitle ? formId : formTitle}</f:facet>
				<ui:param name="template"
					value="#{wi:get(template,'/WEB-INF/xhtml/components/templates/view.xhtml')}" />
				<ui:insert />
				<ui:insert name="buttons">
					<wi:selectOneMenu id="#{gridId}LogicOperator"
						label="Mostrar resultado que atenda a:"
						value="#{bean.restrictionLogicOperator}"
						rendered="#{wi:get(showLogicOperator, false)}" showLock="false"
						optionLabel="#{v.equals('and') ? 'Todas as expressões' : 'Qualquer expressão'}"
						items="#{'and,or'.split(',')}" />

					<s:div styleClass="actionButtons" style="clear: both; width:250px"
						rendered="#{wi:get(showButtons, true)}">
						<wi:commandButton id="searchButton" value="Pesquisar"
							action="#{searchAction}"
							reRender="#{wi:get(searchReRender, 'pageBody')}">
							<f:setPropertyActionListener target="#{bean.page}" value="1" />
						</wi:commandButton>

						<a:commandButton id="clearButton"
							onclick="j$('##{formId}').clearForm();showLoading();"
							oncomplete="hideLoading();"
							action="#{util.invokeMethod(clearAction)}" value="Limpar"
							execute="@this" style="min-width:65px; width:65px;"
							render="#{wi:get(clearReRender, 'pageBody')}"
							styleClass="buttons dr-tbpnl-tb-inact" />
					</s:div>
				</ui:insert>
			</rich:collapsiblePanel>
		</f:validateBean>
	</a:region>
</ui:composition>
