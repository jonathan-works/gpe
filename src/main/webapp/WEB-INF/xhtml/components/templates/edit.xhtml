<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:a="http://richfaces.org/a4j"
     xmlns:c="http://java.sun.com/jsp/jstl/core"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:rich="http://richfaces.org/rich"
     xmlns:s="http://jboss.org/schema/seam/taglib"
     xmlns:wi="http://www.itx.com.br/jsf">

    <ui:param
         name="widthDiv"
         value="#{empty props.widthDiv ? (empty widthDiv ? '250px' : widthDiv) : props.widthDiv}" />               
	<ui:param
         name="inNewLine"
         value="#{empty inNewLine ? props.inNewLine : inNewLine}" />
	<ui:param
         name="tipMessage"
         value="#{empty props.tipMessage ? tipMessage : props.tipMessage}" />
	<ui:param
         name="required"
         value="#{required or requiredField}" />
	<ui:param
         name="showRequired"
         value="#{showRequired == false ? false : required and not empty label}" />
	<ui:param
         name="showLock"
         value="#{showLock == false ? false : (not empty label) and false}" />
	<ui:param
         name="homeRef"
         value="#{empty homeRef ? home : homeRef}" />
	<ui:param
         name="fieldName"
         value="#{(wi:get(fieldId, id)).toString().replaceAll('\\.', '_')}" />
	<ui:param
         name="fieldId"
         value="field#{fieldName}" />

	<s:fragment
         rendered="#{!excludeFields.matches('.*\\b'.concat(id).concat('\\b.*'))}">
    <div
             class="property field edit"
             >
        <s:div
                 id="#{fieldId}Div"
                 styleClass="name">    
	        <s:label
                     styleClass="#{invalid?'errors':''}">
	            <ui:insert
                         name="label" />
	            <s:span
                         styleClass="required"
                         rendered="#{showRequired}">*</s:span>
	        </s:label>
	        <c:if
                     test="#{util.isAbstractChild(homeRef) and showLock}">
		    	<a:commandLink
                         action="#{home.toggleFields(fieldName, homeRef)}"
                         execute="@this"
                         render="#{fieldId}Div"
                         limitRender="true"
                         tabindex="-1"
                         >
		        	<h:graphicImage
                             url="/img/locked.gif"
                             rendered="#{homeRef.lockedFields.contains(fieldName)}"
                             title="Limpar Valor ao Cadastrar" />
		            <h:graphicImage
                             url="/img/unlocked.gif"
                             rendered="#{!homeRef.lockedFields.contains(fieldName)}"
                             title="Manter Valor ao Cadastrar" />
		        </a:commandLink>
	        </c:if>
	        
			<c:if
                     test="#{not empty tipMessage}">
				<h:graphicImage
                         id="#{fieldId}EditTipImg"
                         
                         url="/img/help.gif" />
				<rich:tooltip
                         for="#{fieldId}EditTipImg"
                         value="#{tipMessage}"
                         >
				</rich:tooltip>
			</c:if>
				
			<s:message
                     styleClass="errorFields errors"
                     
                     rendered="#{empty showMessage ? true : showMessage}" />

        </s:div>
        <span
                 class="value #{invalid?'errors':''}">
           		<s:div id="#{fieldId}x"
                         rendered="#{!obfuscate}">
               		<ui:insert />
               	</s:div>
               	<h:outputText
                         value="ocultado"
                         rendered="#{obfuscate}" />
        </span>

    </div>
    </s:fragment>
</ui:composition>
