<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
	
	<p:panel header="#{infoxMessages['acaoProcesso.menuText']}">
		<p:dataTable var="row" value="#{processoHandler.movimentacoes}">
			<p:column headerText="#{infoxMessages['fluxo.tarefa']}">
				<h:outputText value="#{row.tarefa.tarefa}" />
			</p:column>
			<p:column headerText="#{infoxMessages['localizacao.localizacao']} / #{infoxMessages['usuario.usuario']}">
				<div>
					<h:outputText value="#{row.localizacaoExterna}" />
					/
					<h:outputText value="#{row.localizacao}" />
				</div>
				<div>
					<h:outputText value="#{row.usuario}" />
					<p:commandLink action="#{taskInstanceHome.removeUsuario(row.taskInstance)}" process="@this"
						update="@parent pageBodyDialogMessage"
						onclick="return confirm('#{infoxMessages['movimentar.confirmLiberarTarefa']}');" oncomplete="close()"
						rendered="#{authenticator.isUsuarioAtualResponsavel() and (!empty row.usuario and empty row.dataFim)}">
						<h:graphicImage url="#{wiSkin.imageFolder}/unlocked.gif" title="#{infoxMessages['movimentar.liberarTarefa']}" />
					</p:commandLink>
				</div>
			</p:column>
			<p:column headerText="#{infoxMessages['processo.dataInicio']}">
				<h:outputText value="#{row.dataInicio}">
					<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
				</h:outputText>
			</p:column>
			<p:column headerText="#{infoxMessages['processo.dataFim']}">
				<h:outputText value="#{row.dataFim}">
					<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
				</h:outputText>
			</p:column>
		</p:dataTable>
	</p:panel>

</ui:composition>
