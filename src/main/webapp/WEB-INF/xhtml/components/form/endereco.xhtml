<?xml version="1.0" encoding="ISO-8859-1"?>


<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:wi= "http://www.itx.com.br/jsf"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<!--
	  IBPM - Ferramenta de produtividade Java
	  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
	 
	  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
	  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
	  Free Software Foundation; versão 2 da Licença.
	  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
	  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
	  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
	  
	  Consulte a GNU GPL para mais detalhes.
	  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
	  veja em http://www.gnu.org/licenses/  
	-->
	
	#{props.length}?Tamanho do campo (default = 255)
	#{props.cepObrigatorio}?Define se o campo CEP é obrigatório (default = false)
	#{props.tipoObrigatorio}?Define se o campo Tipo de Endereço é obrigatório (default = false)

	<ui:composition>
	
		<script type="text/javascript">  
			function onlyNumberCep(obj){
				valor = obj.value;
				obj.value = valor.replace(/\D/g,"");
				valor = obj.value;
				switch(valor.length){
					case 6:
						obj.value = valor.replace(/(\d)(\d{1})$/,"$1-$2");
						break;
					case 7:
						obj.value = valor.replace(/(\d)(\d{2})$/,"$1-$2");
						break;
					case 8:
						obj.value = valor.replace(/(\d)(\d{3})$/,"$1-$2");				
				}
  			}  
		</script>
		
		<ui:param name="endHome" value="#{empty homeEnd ? enderecoHome : homeEnd}"/>
		<ui:param name="props" value="#{f.properties}"/>
		<ui:param name="homeRef" value="#{endHome}" />
	
	 	<s:div id="enderecoDiv">

		   	<ui:param name="fieldId" value="cep" />
			<wi:suggest 
			    id="#{id}Cep"
				bean="#{cepSuggest}"
				label="#{messages['endereco.cep']}"
				required="#{props.cepObrigatorio}"
				reRender="enderecoDiv"
				maxlength="9"
				minChars="3"
				onkeyup="onlyNumberCep(this)">
				<ui:define name="columns">
					<h:column>
						<h:outputText value="#{var.numeroCep}" />
					</h:column>
					<h:column>
						<h:outputText value="#{var.nomeLogradouro}" />
					</h:column>
					<h:column>
						<h:outputText value="#{var.nomeBairro}" />
					</h:column>
				</ui:define>
			</wi:suggest>
			
			<ui:param name="fieldId" value="nomeEstado" />
			<wi:inputText id="#{f.id}nomeEstado" 
					value="#{endHome.instance.nomeEstado}" 
					disabled="true"
					required="#{f.required}"
					label="#{messages['endereco.nomeEstado']}"/>	
			
			<ui:param name="fieldId" value="nomeCidade" />
			<wi:inputText id="#{f.id}nomeCidade" 
					value="#{endHome.instance.nomeCidade}" 
					disabled="true"
					required="#{f.required}"
					label="#{messages['endereco.nomeCidade']}"/>		
			
			<ui:param name="fieldId" value="nomeBairro" />
			<wi:inputText id="#{f.id}nomeBairro" 			
					required="#{f.required}"
					value="#{endHome.instance.nomeBairro}" 
					label="#{messages['endereco.nomeBairro']}"/>
			
			<ui:param name="fieldId" value="nomeLogradouro" />
			<wi:inputText id="#{f.id}nomeLogradouro" 			
					required="#{f.required}"
					value="#{endHome.instance.nomeLogradouro}" 
					label="#{messages['endereco.nomeLogradouro']}"/>
			
			<ui:param name="fieldId" value="numeroEndereco" />
			<wi:inputText id="#{f.id}numeroEndereco" 			
					required="#{f.required}"
					value="#{endHome.instance.numeroEndereco}" 
					label="#{messages['endereco.numeroEndereco']}"/>
					
			<ui:param name="fieldId" value="complemento" />				
			<wi:inputText id="#{f.id}complemento" 			
					required="#{f.required}"
					value="#{endHome.instance.complemento}" 
					label="#{messages['endereco.complemento']}"/>
			
			<s:decorate id="#{f.id}Decoration9" 
				template="/WEB-INF/xhtml/components/templates/edit.xhtml">
				<ui:param name="props" value="#{f.properties}" />
				<ui:param name="fieldId" value="correspondencia" />
				<ui:define name="label">#{messages["endereco.correspondencia"]}</ui:define>
				<h:selectBooleanCheckbox id="#{f.id}" styleClass="checkbox"
					value="#{endHome.instance.correspondencia}"
					disabled="#{props.disabled}" />
			</s:decorate>
	
	    </s:div>
	</ui:composition>
</jsp:root>