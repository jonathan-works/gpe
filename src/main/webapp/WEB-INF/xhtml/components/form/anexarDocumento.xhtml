<?xml version="1.0" encoding="UTF-8"?>

<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:wi="http://www.itx.com.br/jsf"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
--> 
    <ui:param name="home" value="#{processoDocumentoHome}"/>

    #{home.setModelo(false)}
    <ui:param name="reRenderSaveForm" value="#{reRenderSave}" />
    
    <s:div style="clear: both">
        <wi:inputText
            id="#{f.id}inputProcessoDocumento" 
            value="#{processoDocumentoHome.instance.processoDocumento}" 
            disabled="false"
            required="true"
            label="#{messages['processo.anexarDocumentoDescricao']}">
        </wi:inputText> 
    </s:div>
    <s:div id="divTipoDocumento">
        <wi:selectOneMenuEntity 
            id="#{f.id}tipoProcessoDocumento"
            label="#{messages['tipoProcessoDocumento.tipoProcessoDocumento']}"
            value="#{home.instance.tipoProcessoDocumento}"
            items="#{classificacaoDocumentoFacade.getTipoProcessoDocumentoInterno(false)}" 
            required="true"
            noSelectionLabel="Selecione...">
            <a:ajax event="change"
                       action="#{processoDocumentoHome.onSelectProcessoDocumento()}"
                       execute="@this"
                       render="tipoDocumentoDiv"/>
        </wi:selectOneMenuEntity>
    </s:div>
    
    <wi:selectBooleanCheckbox id="documentoSigiloso"
                              inNewLine="true"
                              value="#{processoDocumentoHome.instance.documentoSigiloso}"
                              label="#{messages['processoDocumento.documentoSigiloso']}"/>

    <s:div id="tipoDocumentoDiv">
        <div style="display:inline-block">
            <wi:fileUpload id="uploadArquivo"
                rendered="#{!home.modelo}"
                label="Arquivo">
            </wi:fileUpload>
            
            <s:div id="usarModeloDiv" rendered="#{home.modelo}">
            
                <wi:selectOneMenuEntity id="modeloDocumentoCombo"
                    label="#{messages['modeloDocumento.modeloDocumento']}"
                    value="#{processoDocumentoHome.modeloDocumentoCombo}"
                    items="#{modeloDocumentoPeticaoItems}"
                    noSelectionLabel="Selecione...">
                    <a:ajax 
                        render="modeloDocumento"
                        event="change"
                        action="#{processoDocumentoHome.processarModelo()}"
                        execute="@this"
                        onsubmit="showLoading()"
                        oncomplete="hideLoading()" />
                </wi:selectOneMenuEntity>
                
                <wi:editor id="modeloDocumento" 
                    label="Modelo"
                    value="#{processoDocumentoBinHome.instance.modeloDocumento}"
                    requiredField="false"
                    required="false"
                    showVariables="false"
                    onchange="clearSign()">
                </wi:editor>
                
                <wi:imageUpload style=""
                                imageBean="#{imageFileUploader}" />                   
                
            </s:div>
        </div>
    </s:div>
            
</ui:composition>   