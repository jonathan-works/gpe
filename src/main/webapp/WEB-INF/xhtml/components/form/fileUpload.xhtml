<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition
	 xmlns:ui="http://java.sun.com/jsf/facelets"
	 xmlns="http://www.w3.org/1999/xhtml"
	 xmlns:a="http://richfaces.org/a4j"
	 xmlns:f="http://java.sun.com/jsf/core"
	 xmlns:h="http://java.sun.com/jsf/html"
	 xmlns:rich="http://richfaces.org/rich"
	 xmlns:s="http://jboss.org/schema/seam/taglib">
	
	
		<s:decorate
		 id="#{id}Decoration"
		 template="/WEB-INF/xhtml/components/templates/edit.xhtml"
		 rendered="#{empty rendered or rendered}">
		
			
			<ui:define name="label">#{label}</ui:define>
			
			<rich:fileUpload
			 id="#{id}"
			 execute="@this"
			 status=":status"
			 allowFlash="true"
			 required="#{empty required ? false : required}"
			 acceptedTypes="#{empty acceptedTypes ? pdf : acceptedTypes}"
			 maxFilesQuantity="#{empty maxFilesQuantity ? 1 : maxFilesQuantity }"
			 fileUploadListener="#{fileHome.listener}"
			 autoclear="#{autoclear}"
			 immediateUpload="#{empty immediateUpload ? true : immediateUpload}"
			 listWidth="#{empty listWidth ? '260px' : listWidth}"
			 listHeight="#{empty listHeight ? '58px' : listHeight}"
			 noDuplicate="#{empty noDuplicate ? true : noDuplicate}"
			 onupload="#{onupload}"
			 onuploadcomplete="#{onuploadcomplete}"
			 addControlLabel="Adicionar"
			 clearAllControlLabel="Limpar"
			 clearControlLabel=""
			 stopControlLabel="Parar"
			 stopEntryControlLabel="Parar"
			 uploadControlLabel="Processar"
			 cancelEntryControlLabel="Cancelar"
			 doneLabel="Enviado"
             sizeExceededLabel="Erro! Tamanho máximo 2MB."
			 validator="nullValidator"
			 validatorMessage="campo obrigatório."
			 requiredMessage="erro, campo obrigatorio">
			
               	<ui:insert />
				<a:ajax
				 event="uploadcomplete"
				 execute="@this"
				 render="uploadBaseDiv">
				</a:ajax>	               	
            
		</rich:fileUpload>
            

			<s:div id="uploadBaseDiv">
			
				<s:div rendered="#{!fileUpload.isEmpty() or true}">
				
				#{currentTime}
					<h:inputHidden
					 id="hiddenBase64"
					 value="#{fileUpload.dataB64}" />
					#{!fileUpload.isEmpty()}	
					
					<applet
					 width="70"
					 height="25"
					 id="certificacao"
					 code="SmartCardSignerApplet"
					 archive="#{util.contextPath}/certificado/InfoxSmartCardSignerApplet.jar">
					
						<param
						 name="signButtonCaption"
						 value="Certificar" />
						<param
						 name="urlDownload"
						 value="#{util.urlProject}/certificado/" />
						<param
						 name="caListDownloadFile"
						 value="#{util.urlProject}/downloadCaList.seam" />
						#{util.urlProject}
					
				</applet> 
				
			</s:div>
			
		</s:div>
						
		
	</s:decorate>
	
</ui:composition>
