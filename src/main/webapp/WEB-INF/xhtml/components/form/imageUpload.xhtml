<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition
	 xmlns:ui="http://java.sun.com/jsf/facelets"
	 xmlns="http://www.w3.org/1999/xhtml"
	 xmlns:a="http://richfaces.org/a4j"
	 xmlns:c="http://java.sun.com/jsp/jstl/core"
	 xmlns:f="http://java.sun.com/jsf/core"
	 xmlns:h="http://java.sun.com/jsf/html"
	 xmlns:rich="http://richfaces.org/rich"
	 xmlns:s="http://jboss.org/schema/seam/taglib">
	
	
		<a:loadScript src="/js/imageUpload.js" />
		
		<ui:param
		 name="rendered"
		 value="#{empty rendered ? true : rendered}" />
		<s:div
		 rendered="#{rendered}"
		 style="float: left; padding-left:3px">
		
			<rich:collapsiblePanel
			 id="uploadImagem"
			 switchType="ajax"
			 opened="false"
			 label="Álbum de imagens"
			 onclick="configureDragDrop()">
			
	            <rich:fileUpload
				 fileUploadListener="#{imageFileUpload.listener}"
				 id="upload"
				 ajaxSingle="true"
				 onupload="uploadHandler(event, '#{imageFileUpload.imagePath}')"
				 onuploadcomplete="insert()"
				 autoclear="true"
				 maxFilesQuantity="10"
				 addControlLabel="Nova imagem"
				 clearAllControlLabel="Limpar todas"
				 clearControlLabel="Limpar"
				 stopEntryControlLabel="Parar"
				 uploadControlLabel="Processar"
				 listWidth="250px"
				 listHeight="0px"
				 immediateUpload="true"
				 noDuplicate="true"
				 status=":status"
				 allowFlash="true"
				 reRender="uploadImagem"
				 acceptedTypes="jpg, gif, png">
	            </rich:fileUpload>
	            <h:form>
				
		           	<rich:dataGrid
					 style="margin-left: 1px; width: 251px;"
					 value="#{imageFileUpload.images}"
					 elements="20"
					 columns="4"
					 var="img">
					
		            	<s:div style="text-align:center">
						
			            	<img
							 src="#{img}"
							 style="width:50px;"
							 title="Arraste para o documento" />
		            	
					</s:div>
			           	<f:facet name="footer">
						
			                <rich:dataScroller />
			            
					</f:facet>
		            	
		           	
				</rich:dataGrid> 
	            
			</h:form>
		
		</rich:collapsiblePanel> 
		
	</s:div>
	
</ui:composition>
