<?xml version="1.0" encoding="UTF-8"?>
<!--
	  IBPM - Ferramenta de produtividade Java
	  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
	 
	  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
	  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
	  Free Software Foundation; versão 2 da Licença.
	  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
	  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
	  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
	  
	  Consulte a GNU GPL para mais detalhes.
	  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
	  veja em http://www.gnu.org/licenses/  
	--><ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:a="http://richfaces.org/a4j"
     xmlns:c="http://java.sun.com/jsp/jstl/core"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:rich="http://richfaces.org/rich"
     xmlns:s="http://jboss.org/schema/seam/taglib"
     xmlns:wi="http://www.itx.com.br/jsf">

		<ui:param name="taskEndAction" value="#{empty taskEndAction ? 'taskInstanceHome.end(taskInstanceHome.name)' : taskEndAction}"></ui:param>

          <c:if
         test="#{taskInstanceHome.transitions.size gt 3}">
           	<h:selectOneMenu
             
             value="#{taskInstanceHome.name}">
				<f:selectItems
                 value="#{taskInstanceHome.transtionsSelectItems}" />
			</h:selectOneMenu>
           	<a:commandButton
             action="#{util.invokeMethod(taskEndAction)}"
             value="OK"
             status="none"
             onmouseup="showLoading()"
             styleClass="buttons"
             eventsQueue="editQueue"
             oncomplete="verifyFields();"
             render=":script, #{reRenderEndTask}" 
             limitRender="true"/>
         </c:if>
         <c:if
         test="#{taskInstanceHome.transitions.size le 3}">
          <a:repeat
             value="#{taskInstanceHome.transitions}"
             var="transition">
           <a:commandButton
                 eventsQueue="editQueue"
                 status="none"
                 onmouseup="showLoading()"
                 oncomplete="verifyFields()"
                 render=":script, #{reRenderEndTask}"
                 limitRender="true"
                 value="#{transition.name}"
                 styleClass="buttons buttons"
                 action="#{util.invokeMethod(taskEndAction)}">
                 <f:setPropertyActionListener target="#{taskInstanceHome.name}" value="#{transition.name}" />
          	</a:commandButton>
          </a:repeat>
         </c:if>

		<ui:fragment rendered="#{jbpmUtil.isUsuarioLogadoResponsavelLocalizacao()}">
			<h:outputText value="Prioridade:" style="font-size: 13px; margin-left: 40px;"/>
			<h:selectOneMenu value="#{processoHome.instance.prioridadeProcesso}">
				<s:selectItems value="#{prioridadeProcessoList.list()}" var="p" label="#{p.descricaoPrioridade}" 
					noSelectionLabel="Selecione..."/>
				<s:convertEntity/>
			</h:selectOneMenu>
		</ui:fragment>
</ui:composition>
