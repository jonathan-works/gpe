<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:wi="http://www.itx.com.br/jsf" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <p:outputPanel rendered="#{not producao}">
        <div class="font-awesome-showcase">
        </div>
        <h:outputScript>
//<![CDATA[
(function () {
    var charBuffer = [
    ];
    var bufferCleaner = undefined;
    var cleanBuffer = function () {
        charBuffer = [
        ];
    };
    var startCleanBufferTimer = function () {
        bufferCleaner = setTimeout(cleanBuffer, 1000);
    };
    var stopCleanBufferTimer = function () {
        clearTimeout(bufferCleaner);
    };
    var restartCleanBufferTimer = function () {
        stopCleanBufferTimer();
        startCleanBufferTimer();
    };
    var shortcuts = {};
    document.querySelector('body').addEventListener('keypress', function (evt) {
        charBuffer.push(evt.keyCode || evt.charCode);
        var stringFromBuffer = charBuffer.join(',');
        if (shortcuts[stringFromBuffer]) {
            shortcuts[stringFromBuffer].apply({
            }, [
                stringFromBuffer
            ]);
            cleanBuffer();
            stopCleanBufferTimer();
        } else {
            restartCleanBufferTimer();
        }
    });
    window.registerShortcut=function(shortcut, callback){
        unregisterShortcut(shortcut);
        shortcuts[shortcut]=callback;
    };
    window.unregisterShortcut=function(shortcut){
      if (shortcuts[shortcut])  {
          delete shortcuts[shortcut];
      }
    };
}) ();
//]]>
        </h:outputScript>
        <h:outputScript>
//<![CDATA[
(function () {
    var link = document.querySelector('link[href*=\'font-awesome\']');
    var createFontAwesomeElement = function (icon, outputObject) {
        var container = document.createElement('span');
        var iconElement = document.createElement('span');
        var labelElement = document.createElement('div');
        labelElement.textContent = icon;
        iconElement.classList.add('fa');
        iconElement.classList.add(['fa',
        icon].join('-'));
        container.appendChild(iconElement);
        container.appendChild(labelElement);
        container.style=[
            'display:inline-block',
            'vertical-align:top',
            'padding:10px',
            'text-align:center',
            'font-size:16px'
        ].join(';');
        outputObject.appendChild(container);
    };
    var createFontAwesomeElements = function (icon) {
        var outputObjects = document.querySelectorAll('.font-awesome-showcase');
        for (var i = 0, l = outputObjects.length; i < l; i++) {
            createFontAwesomeElement(icon, outputObjects.item(i));
        }
    };
    var clearElements = function () {
        var outputObjects = document.querySelectorAll('.font-awesome-showcase');
        for (var i = 0, l = outputObjects.length; i < l; i++) {
            outputObjects.item(i).innerHTML='';
        }
    };
    jQuery.get(link.href, function (data, textStatus, jqXHR) {
        var re = /\.fa-([^:]+):before/g;
        var m;
        var text = data;
        var icons = [
        ];
        do {
            m = re.exec(text);
            if (m) {
                icons.push(m[1]);
            }
        } while (m);
        clearElements();
        icons = icons.sort();
        for(var i=0,l=icons.length;i<l;i++){
            createFontAwesomeElements(icons[i]);
        }
    });
    var toggleFontAwesomeShowCase=function(){
        var outputObjects = document.querySelectorAll('.font-awesome-showcase');
        for (var i = 0, l = outputObjects.length; i < l; i++) {
            
            if ('none'===outputObjects.item(i).style.display){
                outputObjects.item(i).style.display='block';
            } else {
                outputObjects.item(i).style.display='none';
            }
        }
    };
    toggleFontAwesomeShowCase();
    registerShortcut('38,38,40,40,37,39,37,39,98,97,98,97',toggleFontAwesomeShowCase);
})()
//]]>
        </h:outputScript>
    </p:outputPanel>

</ui:composition>