<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:wi="http://www.itx.com.br/jsf"
	xmlns:infox="http://www.infox.com.br/jsf">
	<!-- Ponto de extensão no epp
     Essa arquivo pode ser sobrescrito nos .jar dos módulos do epp 
     para adicionar novas funcionalidades sem alterar a funcionalidade do core.-->
	<infox:tab id="processo" name="processo" render="painelProcessos"
		limitRender="true" action="#{painelTreeHandler.clearTree()}"
		title="#{infoxMessages['caixa.tab']}">
		<s:div rendered="#{painelUsuarioController.tab eq 'processo'}">
			<s:div id="tarefasDiv" styleClass="p-caixas">
				<h:form id="treeProcessoForm">
					<ui:include src="tarefasTree.xhtml" />
				</h:form>
			</s:div>

			<s:div id="painelProcessos" styleClass="p-list" style="margin-left:0.5em;">
				<s:div id="processos"
					rendered="#{(not empty painelUsuarioController.processoIdList or not empty painelUsuarioController.idCaixa) 
	        					 and painelUsuarioController.tab eq 'processo'}">

					<wi:dataTable values="#{consultaProcessoList.list(10)}"
						bean="#{consultaProcessoList}" styleClass="p-list-dtable"
						tableTitle="#{infoxMessages['consultaProcesso.processos']}"
						id="consultaProcessoList" rowId="#{row.idProcesso}"
						searchFormStyleClass="p-list-search"
						panelStyleClass="p-list-panel" hideOrder="true">

						<ui:define name="searchForm">
							<wi:searchForm opened="false" formId="consultaProcessoForm"
								formTitle="#{infoxMessages['searchForm.title']}"
								searchReRender="painelProcessos"
								clearAction="consultaProcessoList.newInstance()"
								clearReRender="painelProcessos">

								<wi:inputText id="numeroProcesso"
									label="#{infoxMessages['consultaProcesso.numeroProcesso']}"
									value="#{consultaProcessoList.entity.numeroProcesso}" />

								<wi:inputDataPeriodo id="periodo"
									label="#{infoxMessages['data.inputPeriodo']}"
									valueDateFrom="#{consultaProcessoList.entity.dataInicio}"
									valueDateTo="#{consultaProcessoList.dataFim}" />

								<wi:selectOneMenuEntity id="natureza"
									label="#{infoxMessages['natureza.tableTitle']}"
									value="#{consultaProcessoList.entity.naturezaCategoriaFluxo.natureza}"
									showLabelSelecione="true"
									items="#{naturezaCategoriaFluxoFacade.getNaturezaList()}" />

								<wi:selectOneMenuEntity id="categoria"
									label="#{infoxMessages['categoria.tableTitle']}"
									value="#{consultaProcessoList.entity.naturezaCategoriaFluxo.categoria}"
									showLabelSelecione="true" inNewLine="true"
									items="#{naturezaCategoriaFluxoFacade.getCategoriaList()}" />

							</wi:searchForm>
						</ui:define>

						<wi:columnOutputText columnId="numeroProcesso"
							columnHeader="#{infoxMessages['consultaProcesso.numeroProcesso']}"
							value="#{row.numeroProcessoRoot}" columnRendered="#{painelUsuarioController.exibirColunasPadrao}" />
						<wi:columnOutputText columnId="usuarioSolicitante"
							columnHeader="#{infoxMessages['consultaProcesso.usuarioCadastroProcesso']}"
							value="#{row.usuarioCadastro}" columnRendered="#{painelUsuarioController.exibirColunasPadrao}"/>
						<wi:columnDateTime columnId="dataInicio"
							columnHeader="#{infoxMessages['consultaProcesso.dataInicio']}"
							value="#{row.dataInicio}" columnRendered="#{painelUsuarioController.exibirColunasPadrao}"/>
						<wi:columnOutputText columnId="natureza"
							columnHeader="#{infoxMessages['consultaProcesso.natureza']}"
							value="#{row.naturezaCategoriaFluxo.natureza}" columnRendered="#{painelUsuarioController.exibirColunasPadrao}"/>
						<wi:columnOutputText columnId="categoria"
							columnHeader="#{infoxMessages['consultaProcesso.categoria']}"
							value="#{row.naturezaCategoriaFluxo.categoria}" columnRendered="#{painelUsuarioController.exibirColunasPadrao}"/>
						<wi:columnOutputText columnId="itemDoProcesso"
							columnHeader="#{infoxMessages['consultaProcesso.item']}"
							value="#{consultaProcessoList.getItemDoProcesso(row)}" columnRendered="#{painelUsuarioController.exibirColunasPadrao}"/>
						<wi:columnOutputText columnId="prioridadeProcesso"
							columnHeader="#{infoxMessages['prioridadeProcesso.tableTitle']}"
							value="#{row.prioridadeProcesso}" columnRendered="#{painelUsuarioController.exibirColunasPadrao}"/>
						<infox:dynamicColumns
							columns="#{consultaProcessoList.dynamicColumns}" />
						<ui:define name="headerToolBar">
							<ui:include
								src="/WEB-INF/xhtml/components/grid/header/tools/toolBarProcessoJbpm.xhtml" />
						</ui:define>
						<ui:define name="toolBar">
							<ui:include
								src="/WEB-INF/xhtml/components/grid/tools/toolBarProcessoJbpm.xhtml" />
						</ui:define>
					</wi:dataTable>
				</s:div>
			</s:div>
		</s:div>
	</infox:tab>
</ui:composition>
