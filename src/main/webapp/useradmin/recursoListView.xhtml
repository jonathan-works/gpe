<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf"
    xmlns:infox="http://www.infox.com.br/jsf"
    xmlns:a="http://richfaces.org/a4j"
    template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">

    <ui:param name="home" value="#{recursoCrudAction}" />

    <ui:param name="showFormTab" value="#{home.managed}" />

    <ui:define name="title">#{messages['recurso.titlePage']}</ui:define>

    <ui:define name="searchGrid">

        <wi:dataTable values="#{recursoList.list(15)}"
            bean="#{recursoList}"
            tableTitle="#{messages['recurso.tableTitle']}"
            id="recursoList" rowId="#{row.idRecurso}">
            <ui:define name="searchForm">
                <wi:searchForm formId="pesquisarRecursoForm"
                    formTitle="#{messages['searchForm.title']}">
                    <wi:inputText id="nome"
                        label="#{messages['recurso.nome']}"
                        value="#{recursoList.entity.nome}"
                        maxlength="100" />
                    <wi:inputText id="identificador"
                        label="#{messages['recurso.identificador']}"
                        value="#{recursoList.entity.identificador}"
                        maxlength="100" />
                </wi:searchForm>
            </ui:define>
            <wi:columnOutputText columnId="nome"
                columnHeader="#{messages['recurso.nome']}"
                value="#{row.nome}" />
            <wi:columnOutputText columnId="identificador"
                columnHeader="#{messages['recurso.identificador']}"
                value="#{row.identificador}" />
            <ui:define name="headerToolBar" />
            <ui:define name="toolBar">
                <wi:toolBarEdit id="recursoListedit" />
            </ui:define>
        </wi:dataTable>
    </ui:define>

    <ui:define name="form">
        <wi:dataForm formId="recursos"
            formTitle="#{messages['form.title']}"
            updateAction="recursoCrudAction.save()"
            persistAction="recursoCrudAction.save()">
            <wi:outputText id="identificador" label="Identificador"
                value="#{recursoCrudAction.instance.identificador}">

            </wi:outputText>

            <wi:inputText id="nome" label="Nome"
                value="#{recursoCrudAction.instance.nome}"
                required="true" />
            <ui:define name="buttons">
                <wi:commandButtonSave />
            </ui:define>
        </wi:dataForm>
    </ui:define>

    <ui:define name="tabs">

        <infox:tab id="papeisTab"
            rendered="#{recursoCrudAction.isManaged()}"
            title="#{messages['recursoPapel.titleTab']}"
            name="papeisTab"
            action="#{recursoPapelController.setRecurso(recursoCrudAction.instance)}">

            <wi:dataForm formId="papel"
                formTitle="Recurso: #{recursoCrudAction.instance.nome}">
                <a:region>
                    <wi:pickList id="recurso"
                        targetCaption="PapÃ©is que possuem acesso direto ao recurso:"
                        value="#{recursoPapelController.papeis}"
                        itemValues="#{recursoPapelController.papeisDisponiveis}"
                        itemLabel="#{var}" />
                </a:region>
                <ui:define name="buttons">
                    <wi:commandButton id="papeisButton"
                        action="recursoPapelController.save()"
                        value="#{messages['crud.update']}" />
                </ui:define>
            </wi:dataForm>

        </infox:tab>
    </ui:define>

</ui:composition>
