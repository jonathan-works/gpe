<?xml version="1.0" encoding="UTF-8"?>

<ui:composition
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:wi="http://www.itx.com.br/jsf"
  xmlns:infox="http://www.infox.com.br/jsf"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:s="http://jboss.org/schema/seam/taglib"
  template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">

  <ui:define name="title">#{infoxMessages['sala.titlePage']}</ui:define>
  <ui:param
    name="home"
    value="#{salaCrudAction}" />

  <ui:define name="searchGrid">
    <wi:dataTable
      values="#{salaList.list(15)}"
      bean="#{salaList}"
      tableTitle="#{infoxMessages['sala.tableTitle']}"
      id="salaList"
      rowId="#{row.idSala}">
      <ui:define name="searchForm">
        <wi:searchForm
          formId="pesquisarSalaForm"
          formTitle="#{infoxMessages['searchForm.title']}">
          <wi:inputText
            id="nome"
            label="#{infoxMessages['sala.nome']}"
            value="#{salaList.entity.nome}" />
          <wi:selectOneMenuEntity
            id="unidadeDecisoraColegiada"
            label="#{infoxMessages['sala.colegiado']}"
            value="#{salaList.entity.unidadeDecisoraColegiada}"
            items="#{salaCrudAction.unidadeDecisoraColegiadaList}">
          </wi:selectOneMenuEntity>
          <wi:selectSituacaoOneMenu
            id="ativo"
            value="#{salaList.entity.ativo}" />
        </wi:searchForm>
      </ui:define>
      
      <wi:columnOutputText columnId="nome"
          columnHeader="#{infoxMessages['sala.nome']}"
          value="#{row.nome}" />
        
      <wi:columnOutputText columnId="unidadeDecisoraColegiada"
          columnHeader="#{infoxMessages['sala.colegiado']}"
          value="#{row.unidadeDecisoraColegiada}" />
        
      <wi:columnOutputText columnId="endereco"
          columnHeader="#{infoxMessages['sala.endereco']}"
          value="#{row.endereco}" />
        
      <wi:columnOutputText columnId="turnosFormatado"
          columnHeader="#{infoxMessages['sala.turnos']}"
          value="#{row.turnosFormatado}"
          hideOrder="true" />
        
      <wi:columnBoolean columnId="foraExpediente"
          columnHeader="#{infoxMessages['sala.foraExpediente']}"
          value="#{row.foraExpediente}" />
          
      <wi:columnSituacao columnId="ativo" value="#{row.ativo}" />
    </wi:dataTable>
  </ui:define>

  <ui:define name="form">
    <wi:dataForm
      formId="salaJulgamentoForm"
      formTitle="#{infoxMessages['form.title']}">
      <wi:inputText
          id="nome"
          label="#{infoxMessages['sala.nome']}"
          value="#{salaCrudAction.instance.nome}"
          required="true" />
      <wi:selectOneMenuEntity
          id="unidadeDecisoraColegiada"
          label="#{infoxMessages['sala.colegiado']}"
          value="#{salaCrudAction.instance.unidadeDecisoraColegiada}"
          items="#{salaCrudAction.unidadeDecisoraColegiadaList}"
          required="true" 
          rendered="#{empty authenticator.colegiadaLogada}" />
      <wi:outputText id="unidadeDecisoraColegiadaOut" 
          label="#{infoxMessages['sala.colegiado']}"
          value="#{salaCrudAction.instance.unidadeDecisoraColegiada}" 
          rendered="#{not empty authenticator.colegiadaLogada}" />
      <wi:inputText
          id="endereco"
          label="#{infoxMessages['sala.endereco']}"
          value="#{salaCrudAction.instance.endereco}"
          required="true" />
      <wi:selectBooleanRadio
          id="foraExpediente"
          label="#{infoxMessages['sala.foraExpediente']}"
          value="#{salaCrudAction.instance.foraExpediente}" />
      <wi:selectSituacaoRadio
          id="ativo"
          value="#{salaCrudAction.instance.ativo}" />
    </wi:dataForm>
  </ui:define>

  <ui:define name="tabs">
    <infox:tab
      status=":status"
      id="salaTurnoTab"
      action="#{salaTurnoAction.newInstance(salaCrudAction.getInstance())}"
      rendered="#{home.managed}"
      title="#{infoxMessages['sala.turnos']}"
      name="salaTurnoTab">
      <h:form>
        <wi:turnoCalendar
          handler="#{salaTurnoAction.turnoHandler}" />
        <wi:commandButton
          id="salaTurnoTabPersistButton"
          action="#{salaTurnoAction.gravarTurnos()}"
          render="pageBodyDialogMessage"
          limitRender="true"
          execute="@form"
          value="#{infoxMessages['crud.update']}" />
      </h:form>
    </infox:tab>
  </ui:define>

</ui:composition>
