<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf"
    xmlns:infox="http://www.infox.com.br/jsf"
    xmlns:f="http://java.sun.com/jsf/core"
    template="/WEB-INF/xhtml/templates/core/menuTemplate.xhtml">
    <ui:define name="body">
        <infox:tabPanel
            id="defaultTabPanel"
            switchType="ajax"
            activeTab="#{search.tab}">
            <h:form>
                <infox:tabHeaders />
            </h:form>
            <infox:tab
                id="conteudo"
                name="conteudo"
                rendered="true"
                immediate="true"
                status=":status"
                title="#{messages['indexedSearch.conteudo']}">
                <div>
                    <h:panelGroup
                        rendered="#{taskConteudoSearch.resultadoPesquisa.size() gt 0}">
                        <h:outputText
                            value="#{search.firstRow} #{messages['indexedSearch.to']} #{search.lastRow}"
                            style="font-weight: bold" />
                        <h:outputText
                            value=" #{messages['search.currentPage']} " />
                    </h:panelGroup>
                    <h:outputText
                        value="#{taskConteudoSearch.resultadoPesquisa.size()}"
                        style="font-weight: bold" />
                    <h:outputText
                        value=" #{messages['indexedSearch.about']} " />
                    <h:outputText
                        value="#{taskConteudoSearch.palavraPesquisada}"
                        style="font-weight: bold" />
                </div>
                <h:form>
                    <h:dataTable
                        id="conteudoSearchResult"
                        rows="#{taskConteudoSearch.pageSize}"
                        rendered="#{! empty taskConteudoSearch.resultadoPesquisa}"
                        value="#{taskConteudoSearch.resultadoPesquisa}"
                        var="taskConteudo">
                        <h:column>
                            <div>
                                <s:link
                                    target="_blank"
                                    view="/Processo/Consulta/paginator.xhtml"
                                    value="Processo: #{taskConteudo.numeroProcesso} #{processoDocumentoSearch.getNameTarefa(taskConteudo.idTaskInstance)}">
                                    <f:param
                                        name="inicio"
                                        value="0" />
                                    <f:param
                                        name="taskId"
                                        value="#{taskConteudo.idTaskInstance}" />
                                </s:link>
                                <div>
                                    <h:outputText
                                        value="bestFragments" />
                                </div>
                            </div>
                        </h:column>
                    </h:dataTable>
                </h:form>
            </infox:tab>
            <infox:tab
                id="documentos"
                name="documentos"
                rendered="true"
                immediate="true"
                status=":status"
                title="#{messages['indexedSearch.documentoTitleTab']}">
                <s:div id="resultado">
                    <div>
                        <h:panelGroup
                            rendered="#{processoDocumentoSearch.resultadoPesquisa.size() gt 0}">
                            <h:outputText
                                value="#{search.firstRow} #{messages['indexedSearch.to']} #{search.lastRow}"
                                style="font-weight: bold" />
                            <h:outputText
                                value=" #{messages['search.currentPage']} " />
                        </h:panelGroup>
                        <h:outputText
                            value="#{processoDocumentoSearch.resultadoPesquisa.size()}"
                            style="font-weight: bold" />
                        <h:outputText
                            value=" #{messages['indexedSearch.about']} " />
                        <h:outputText
                            value="#{processoDocumentoSearch.palavraPesquisada}"
                            style="font-weight: bold" />
                    </div>
                    <h:form>
                        <h:dataTable
                            id="searchResult"
                            rows="#{processoDocumentoSearch.pageSize}"
                            rendered="#{! empty processoDocumentoSearch.resultadoPesquisa}"
                            value="#{processoDocumentoSearch.resultadoPesquisa}"
                            var="document">
                            <h:column>
                                <div>
                                    <s:link
                                        target="_blank"
                                        view="/Processo/Consulta/paginator.xhtml"
                                        value="Processo: #{processoSearcher.getNumeroProcesso(document.processo.idProcesso)} #{processoDocumentoSearch.getNameTarefa(document.idJbpmTask)}">
                                        <f:param
                                            name="inicio"
                                            value="0" />
                                        <f:param
                                            name="taskId"
                                            value="#{document.idJbpmTask}" />
                                        <f:param
                                            name="idProcesso"
                                            value="#{document.processo.idProcesso}" />
                                    </s:link>
                                    <div>
                                        <h:outputText
                                            value="#{messages['indexedSearch.foundAt']} #{document.processoDocumento}" />
                                    </div>
                                </div>
                            </h:column>
                        </h:dataTable>
                    </h:form>
                </s:div>
            </infox:tab>
        </infox:tabPanel>
    </ui:define>
</ui:composition>