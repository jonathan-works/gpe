<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf"
    template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">
    
    <ui:define name="title">#{messages['unidadeDecisoraColegiada.titleView']}</ui:define>
    <ui:param name="home" value="#{unidadeDecisoraColegiadaCrudAction}"/>
    
    <ui:define name="searchGrid">
    	<wi:dataTable
            values="#{unidadeDecisoraColegiadaList.list(15)}"
            bean="#{unidadeDecisoraColegiadaList}"
            tableTitle="#{messages['unidadeDecisoraColegiada.tableTitle']}"
            id="unidadeDecisoraColegiadaList"
            rowId="#{row.idUnidadeDecisoraColegiada}">
            
            <ui:define name="searchForm">
                <wi:searchForm
                    formId="pesquisarUnidadeDecisoraMonocraticaForm"
                    formTitle="#{messages['searchForm.title']}">
                    
                    <wi:inputText 
                   		id="nomeUnidadeDecisoraColegiada"
	                    maxlength="100"
	                    value="#{bean.entity.nome}"
	                    label="#{messages['unidadeDecisoraColegiada.nomeUnidadeDecisora']}"/>
                    
                    <wi:selectOneMenuEntity
                    	id="unidadeMonocratica"
                    	value="#{unidadeDecisoraColegiadaList.unidadeDecisoraMonocratica}"
                    	valueItems="#{unidadeDecisoraColegiadaList.getAllUniDecisoraMonocratica()}"/>
                    	
                    <wi:selectSituacaoOneMenu
                        id="ativo"
                        label="#{messages['field.situacao']}"
                        value="#{bean.entity.ativo}"/>
                        
                </wi:searchForm>
            </ui:define>
            
            <wi:columnOutputText
                columnId="nome"
                columnHeader="#{messages['unidadeDecisoraColegiada.nomeUnidadeDecisora']}"
                value="#{row.nome}"/>
            
            <wi:columnOutputText
                columnId="unidadeDecisoraMonocraticas"
                columnHeader="#{messages['unidadeDecisoraColegiada.unidadesMonocraticas']}"
                hideOrder="true">
                <ui:repeat
                    var="uniColegiadaMono"
                    value="#{row.unidadeDecisoraColegiadaMonocraticaList}">
                    <div>#{uniColegiadaMono.unidadeDecisoraMonocratica.nome}</div>
                </ui:repeat>
            </wi:columnOutputText>
            
            <wi:columnSituacao
                columnId="ativo"
                columnHeader="#{messages['field.situacao']}"
                value="#{row.ativo}"/>
             
        </wi:dataTable>
    </ui:define>
    
    <ui:define name="form">
    	<wi:dataForm
            formId="unidadeDecisoraColegiadaForm"
            formTitle="#{messages['form.title']}">
            
            <wi:inputText
	                id="nome"
	                value="#{unidadeDecisoraColegiadaCrudAction.instance.nome}"
	                label="#{messages['unidadeDecisoraColegiada.nomeUnidadeDecisora']}"
	                required="true" />
                
             <wi:selectSituacaoRadio
	               id="ativo"
	               label="#{messages['field.situacao']}"
	               value="#{unidadeDecisoraColegiadaCrudAction.instance.ativo}"/>
	               
	         <rich:panel id="unidadesMonocraticasAssociadasDiv" 
	         			 rendered="#{home.managed}"
	         			 header="#{messages['unidadeDecisoraColegiada.unidadesMonocraticas']}">
	         			 
		         <wi:selectOneMenuEntity 
		         			id="selectUnidadesDemocraticas"
		         			label="#{messages['unidadeDecisoraColegiada.unidadeDecisoraMonocratica']}"
		         			value="#{unidadeDecisoraColegiadaCrudAction.unidadeDecisoraColegiadaMonocratica.unidadeDecisoraMonocratica}"
		         			itemValues="#{unidadeDecisoraColegiadaCrudAction.unidadeDecisoraMonocraticaItemList}"
		         			required="true"/>
		         
		         <wi:selectBooleanCheckbox
		         			id="checkPresidente"
		         			label="#{messages['unidadeDecisoraColegiada.presidente']}"
		         			value="#{unidadeDecisoraColegiadaCrudAction.unidadeDecisoraColegiadaMonocratica.presidente}"
		         			disabled="#{unidadeDecisoraColegiadaCrudAction.jaPosuiPresidente()}"/>
		         <s:div>
			         <wi:commandButton 
			         			id="buttonAdicionarMonocratica"
			         			action="unidadeDecisoraColegiadaCrudAction.adicionarUnidadeMonocratica()"
			         			value="Adicionar"
			         			reRender="dataTableAssociada, pageBodyDialogMessage"/>
		         </s:div>
		         
		         <rich:dataTable id="dataTableAssociada"
		         			    values="#{unidadeDecisoraColegiadaCrudAction.instance.unidadeDecisoraColegiadaMonocraticaList}"
		         			    style="width:100%; margin-bottom:10px; margin-top:10px;"
		         			    var="row">
		         			    
		         		<f:facet name="header">
		                	<h:outputText value="#{messages['unidadeDecisoraColegiada.unidadesMonocraticasAssociadas']}"/>
				        </f:facet>
		         		
		         		<wi:columnOutputText 
		         				columnId="nome"
                				columnHeader="#{messages['unidadeDecisoraMonocratica.nomeUnidadeDecisora']}"
                				value="#{row.unidadeDecisoraMonocratica.nome}"
                				hideOrder="true"/>
                				
                		<wi:columnOutputText
				                columnId="localizacao"
				                columnHeader="#{messages['unidadeDecisoraMonocratica.localizacao']}"
				                value="#{row.unidadeDecisoraMonocratica.localizacao}"
				                hideOrder="true"/>
				                
				        <wi:columnOutputText
				        		columnId="presidente"
				                columnHeader="#{messages['unidadeDecisoraColegiada.presidente']}"
				                value="#{row.presidente ? messages['entity.ativo'] : messages['entity.inativo']}"
				                hideOrder="true"/>
				                
				        <f:facet name="footer">
		                	<h:outputText value="Registros"/>
				        </f:facet>
		         
		         </rich:dataTable>
	         </rich:panel>
	         
        </wi:dataForm>
    </ui:define>
    
</ui:composition>