<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:a="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:wi="http://www.itx.com.br/jsf"
  template="/WEB-INF/xhtml/templates/core/baseTemplate.xhtml">

<ui:define name="baseBody">
	<rich:panel id="#{termoAdesaoAction.termoAdesaoPanelName}" styleClass="painel-termo-adesao">
	  <f:facet name="header">#{eppmessages['login.termoAdesao']}</f:facet>
	  <h:form id="termoAdesaoForm">
	    <a:jsFunction
	      name="assinarTermo"
	      action="#{termoAdesaoAction.assinarTermoAdesao(termoAdesaoAction.certChain,termoAdesaoAction.signature)}"
	      execute="@this termoAdesaoSignature termoAdesaoCertChain"
	      render="DialogMessage"
	      limitRender="true" />
	    <h:inputHidden
	      id="termoAdesaoSignature"
	      value="#{termoAdesaoAction.signature}">
	    </h:inputHidden>
	    <h:inputHidden
	      id="termoAdesaoCertChain"
	      value="#{termoAdesaoAction.certChain}">
	    </h:inputHidden>
	    <s:div>
	      <div>
	        <wi:editor
	          id="termoAdesao"
	          value="#{termoAdesaoAction.termoAdesao}"
	          readonly="true"
	          showVariables="false"
	          width="#{800-15}"
	          height="#{600-157}" />
	      </div>
	      
	      <div>
	        <wi:appletAssinatura
	          id="assinarTermoAdesao"
	          urlDownloadFile="#{pathResolver.urlProject}/downloadCaList.seam"
	          formId="#{rich:clientId('termoAdesaoForm')}"
	          certificationChainField="#{rich:clientId('termoAdesaoCertChain')}"
	          signatureField="#{rich:clientId('termoAdesaoSignature')}"
	          getDataFunction="infox.editor.termoAdesao.instance.getData()"
	          useBase64Function="'true'"
	          functionPreSign="infox.showLoading();"
	          functionPosSign="assinarTermo();infox.hideLoading();"
	          debug="false"
	          loginMode="false"
	          useProviderDll="false"
	          signButtonCaption="#{eppmessages['login.assinarTermoAdesao']}">
	        </wi:appletAssinatura>
	          
	        <input
	          style="vertical-align: top; width: 140px !important; height: 25px;"
	          id="cancela"
	          type="button"
	          onclick="location.href='#{pathResolver.contextPath}/login.seam'"
	          value="#{eppmessages['login.cancelaTrocaSenhaBtn']}" />
	      </div>
	    </s:div>
	  </h:form>
	</rich:panel>
</ui:define>
</ui:composition>