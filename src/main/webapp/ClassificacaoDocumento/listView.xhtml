<?xml version="1.0" encoding="UTF-8"?>

<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:infox="http://www.infox.com.br/jsf"
    xmlns:wi="http://www.itx.com.br/jsf"
    template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">


    <ui:define name="title">#{messages['tipoProcessoDocumento.titlePage']}</ui:define>

    <ui:param
        name="home"
        value="#{classificacaoDocumentoCrudAction}" />

    <ui:define name="searchGrid">

        <wi:dataTable
            values="#{tipoProcessoDocumentoList.list(15)}"
            bean="#{tipoProcessoDocumentoList}"
            tableTitle="#{messages['tipoProcessoDocumento.tableTitle']}"
            id="tipoProcessoDocumentoList"
            rowId="#{row.idTipoProcessoDocumento}">

            <ui:define name="searchForm">

                <wi:searchForm
                    formId="pesquisarTipoProcessoDocumentoForm"
                    formTitle="#{messages['searchForm.title']}">

                    <wi:inputText
                        id="codigoDocumento"
                        value="#{tipoProcessoDocumentoList.entity.codigoDocumento}"
                        label="#{messages['tipoProcessoDocumento.codigoDocumento']}"
                        maxlength="30" />
                    <wi:inputText
                        id="tipoProcessoDocumento"
                        label="#{messages['tipoProcessoDocumento.tipoProcessoDocumento']}"
                        value="#{tipoProcessoDocumentoList.entity.tipoProcessoDocumento}"
                        maxlength="100" />
                    <wi:selectOneMenuEnum
                        id="usoTipoDocumento"
                        label="#{messages['tipoProcessoDocumento.uso']}"
                        items="#{classificacaoDocumentoFacade.getTipoDocumentoEnumValues()}"
                        value="#{tipoProcessoDocumentoList.entity.inTipoDocumento}"
                        noSelectionLabel="#{messages['crud.select.all']}" />
                    <wi:selectSituacaoOneMenu
                        id="ativo"
                        label="#{messages['field.situacao']}"
                        value="#{tipoProcessoDocumentoList.entity.ativo}" />

                </wi:searchForm>

            </ui:define>

            <wi:columnOutputText
                columnId="codigoDocumento"
                columnHeader="#{messages['tipoProcessoDocumento.codigoDocumento']}"
                value="#{row.codigoDocumento}" />
            <wi:columnOutputText
                columnId="tipoProcessoDocumento"
                columnHeader="#{messages['tipoProcessoDocumento.tipoProcessoDocumento']}"
                value="#{row.tipoProcessoDocumento}" />
            <wi:columnEnum
                columnId="inTipoDocumento"
                columnHeader="#{messages['tipoProcessoDocumento.uso']}"
                value="#{row.inTipoDocumento}" />
            <wi:columnSituacao
                columnId="ativo"
                columnHeader="#{messages['field.situacao']}"
                value="#{row.ativo}" />

        </wi:dataTable>

    </ui:define>

    <ui:define name="form">

        <wi:dataForm
            formId="tipoProcessoDocumentoForm"
            formTitle="#{messages['form.title']}">

            <wi:inputText
                id="codigoDocumento"
                value="#{classificacaoDocumentoCrudAction.instance.codigoDocumento}"
                required="true"
                label="#{messages['tipoProcessoDocumento.codigoDocumento']}"
                maxlength="30" />
            <wi:inputText
                id="tipoProcessoDocumento"
                label="#{messages['tipoProcessoDocumento.tipoProcessoDocumento']}"
                required="true"
                value="#{classificacaoDocumentoCrudAction.instance.tipoProcessoDocumento}"
                maxlength="150" />
            <wi:selectOneMenuEnum
                id="usoTipoDocumento"
                label="#{messages['tipoProcessoDocumento.uso']}"
                items="#{classificacaoDocumentoFacade.getTipoDocumentoEnumValues()}"
                value="#{classificacaoDocumentoCrudAction.instance.inTipoDocumento}"
                required="true"
                showLabelSelecione="true" />
            <wi:selectOneRadio
                id="numera"
                label="#{messages['tipoProcessoDocumento.numera']}"
                value="#{classificacaoDocumentoCrudAction.instance.numera}"
                valueList="true:Sim, false:NÃ£o">

                <a:ajax 
                    event="change"
                    render="mascaraDiv"
                    limitRender="true"
                    status=":status"
                    execute="@this"/>

            </wi:selectOneRadio>

            <s:div id="mascaraDiv">

                <wi:selectOneMenuEnum
                    id="tipoNumeracaoCombo"
                    rendered="#{classificacaoDocumentoCrudAction.instance.numera}"
                    label="#{messages['classificacaoDocumento.tipoNumeracao']}"
                    items="#{classificacaoDocumentoFacade.getTipoNumeracaoEnumValues()}"
                    value="#{classificacaoDocumentoCrudAction.instance.tipoNumeracao}"
                    required="true"
                    showLabelSelecione="true" />

            </s:div>
            <wi:selectBooleanRadio
                id="sistema"
                label="#{messages['tipoProcessoDocumento.sistema']}"
                value="#{classificacaoDocumentoCrudAction.instance.sistema}" />
            <wi:selectBooleanRadio
                id="publico"
                label="#{messages['tipoProcessoDocumento.publico']}"
                value="#{classificacaoDocumentoCrudAction.instance.publico}" />
            <wi:selectSituacaoRadio
                id="ativo"
                label="#{messages['field.situacao']}"
                value="#{classificacaoDocumentoCrudAction.instance.ativo}" />
            <wi:inputTextarea
                id="tipoProcessoDocumentoObservacao"
                label="#{messages['tipoProcessoDocumento.tipoProcessoDocumentoObservacao']}"
                value="#{classificacaoDocumentoCrudAction.instance.tipoProcessoDocumentoObservacao}"
                maxlength="150" />

        </wi:dataForm>

    </ui:define>
    <ui:define name="tabs">

        <infox:tab
            status=":status"
            id="associarPapelTab"
            rendered="#{home.managed}"
            name="associarPapelTab"
            title="#{messages['tipoProcessoDocumento.papel']}">

            <s:div id="divAssociarPapel">

                <wi:dataForm
                    formId="tipoProcessoDocumentoPapelForm"
                    formTitle="#{messages['form.title']}">

                    <wi:selectOneMenuEntity
                        id="papel"
                        label="#{messages['tipoProcessoDocumentoPapel.papel']}"
                        items="#{classificacaoDocumentoPapelCrudAction.papelItems()}"
                        value="#{classificacaoDocumentoPapelCrudAction.instance.papel}"
                        showLabelSelecione="true"
                        required="true" />
                    <wi:selectBooleanRadio
                        id="obrigatorio"
                        required="true"
                        value="#{classificacaoDocumentoPapelCrudAction.instance.obrigatorio}"
                        label="#{messages['tipoProcessoDocumentoPapel.obrigatorio']}" />
                    <ui:define name="buttons">
                        <wi:commandButtonPersist
                            home="#{classificacaoDocumentoPapelCrudAction}"
                            persistAction="classificacaoDocumentoPapelCrudAction.save()" />
                    </ui:define>
                </wi:dataForm>

                <wi:dataTable
                    values="#{tipoProcessoDocumentoPapelList.list(15)}"
                    bean="#{tipoProcessoDocumentoPapelList}"
                    tableTitle="#{classificacaoDocumentoCrudAction.instance} - #{messages['form.title']}"
                    id="tipoProcessoDocumentoPapelList"
                    rowId="#{row.idTipoProcessoDocumentoPapel}"
                    listReRender="divAssociarPapel"
                    showMsg="false">

                    <wi:columnOutputText
                        columnId="papel"
                        columnHeader="#{messages['tipoProcessoDocumentoPapel.papel']}"
                        value="#{row.papel}" />
                    <wi:columnBoolean
                        columnId="obrigatorio"
                        columnHeader="#{messages['tipoProcessoDocumentoPapel.obrigatorio']}"
                        value="#{row.obrigatorio}" />
                    <ui:define name="headerToolBar" />
                    <ui:define name="toolBar">
                         <wi:toolBar url="/img/remove.png"
                            title="Remover registro"
                            action="classificacaoDocumentoPapelCrudAction.remove(row)"
                            render="divAssociarPapel, pageBodyDialogMessage"
                            execute="@this"
                            onclick="return confirm('Deseja remover o registro?');"
                            id="removeButton"/>
                    </ui:define>

                </wi:dataTable>

            </s:div>

        </infox:tab>

    </ui:define>

</ui:composition>
