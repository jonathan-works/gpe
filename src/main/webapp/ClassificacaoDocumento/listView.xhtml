<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:infox="http://www.infox.com.br/jsf"
    xmlns:wi="http://www.itx.com.br/jsf"
    template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">


    <ui:define name="title">#{eppmessages['tipoProcessoDocumento.titlePage']}</ui:define>

    <ui:param name="home" value="#{classificacaoDocumentoCrudAction}" />

    <ui:define name="searchGrid">

        <wi:dataTable values="#{tipoProcessoDocumentoList.list(15)}"
            bean="#{tipoProcessoDocumentoList}"
            tableTitle="#{eppmessages['tipoProcessoDocumento.tableTitle']}"
            id="tipoProcessoDocumentoList"
            rowId="#{row.idTipoProcessoDocumento}">

            <ui:define name="searchForm">

                <wi:searchForm
                    formId="pesquisarTipoProcessoDocumentoForm"
                    formTitle="#{eppmessages['searchForm.title']}">

                    <wi:inputText id="codigoDocumento"
                        value="#{tipoProcessoDocumentoList.entity.codigoDocumento}"
                        label="#{eppmessages['tipoProcessoDocumento.codigoDocumento']}"
                        maxlength="30" />
                    <wi:inputText id="tipoProcessoDocumento"
                        label="#{eppmessages['tipoProcessoDocumento.tipoProcessoDocumento']}"
                        value="#{tipoProcessoDocumentoList.entity.tipoProcessoDocumento}"
                        maxlength="100" />
                    <wi:selectOneMenuEnum id="usoTipoDocumento"
                        label="#{eppmessages['tipoProcessoDocumento.uso']}"
                        items="#{classificacaoDocumentoFacade.getTipoDocumentoEnumValues()}"
                        value="#{tipoProcessoDocumentoList.entity.inTipoDocumento}"
                        noSelectionLabel="#{eppmessages['crud.select.all']}" />
                    <wi:selectSituacaoOneMenu id="ativo"
                        label="#{eppmessages['field.situacao']}"
                        value="#{tipoProcessoDocumentoList.entity.ativo}" />

                </wi:searchForm>

            </ui:define>

            <wi:columnOutputText columnId="codigoDocumento"
                columnHeader="#{eppmessages['tipoProcessoDocumento.codigoDocumento']}"
                value="#{row.codigoDocumento}" />
            <wi:columnOutputText columnId="tipoProcessoDocumento"
                columnHeader="#{eppmessages['tipoProcessoDocumento.tipoProcessoDocumento']}"
                value="#{row.tipoProcessoDocumento}" />
            <wi:columnEnum columnId="inTipoDocumento"
                columnHeader="#{eppmessages['tipoProcessoDocumento.uso']}"
                value="#{row.inTipoDocumento}" />
            <wi:columnSituacao columnId="ativo"
                columnHeader="#{eppmessages['field.situacao']}"
                value="#{row.ativo}" />

        </wi:dataTable>

    </ui:define>

    <ui:define name="form">

        <wi:dataForm formId="tipoProcessoDocumentoForm"
            formTitle="#{eppmessages['form.title']}">

            <wi:inputText id="codigoDocumento"
                value="#{classificacaoDocumentoCrudAction.instance.codigoDocumento}"
                required="true"
                label="#{eppmessages['tipoProcessoDocumento.codigoDocumento']}"
                maxlength="30" />
            <wi:inputText id="tipoProcessoDocumento"
                label="#{eppmessages['tipoProcessoDocumento.tipoProcessoDocumento']}"
                required="true"
                value="#{classificacaoDocumentoCrudAction.instance.tipoProcessoDocumento}"
                maxlength="150" />
            <wi:selectOneMenuEnum id="usoTipoDocumento"
                label="#{eppmessages['tipoProcessoDocumento.uso']}"
                items="#{classificacaoDocumentoFacade.getTipoDocumentoEnumValues()}"
                value="#{classificacaoDocumentoCrudAction.instance.inTipoDocumento}"
                required="true" showLabelSelecione="true" />
            <wi:selectBooleanRadio id="sistema"
                label="#{eppmessages['tipoProcessoDocumento.sistema']}"
                value="#{classificacaoDocumentoCrudAction.instance.sistema}" />
            <wi:selectBooleanRadio id="publico"
                label="#{eppmessages['tipoProcessoDocumento.publico']}"
                value="#{classificacaoDocumentoCrudAction.instance.publico}" />
            <wi:selectSituacaoRadio id="ativo"
                label="#{eppmessages['field.situacao']}"
                value="#{classificacaoDocumentoCrudAction.instance.ativo}" />
            <wi:inputTextarea id="tipoProcessoDocumentoObservacao"
                label="#{eppmessages['tipoProcessoDocumento.tipoProcessoDocumentoObservacao']}"
                value="#{classificacaoDocumentoCrudAction.instance.tipoProcessoDocumentoObservacao}"
                maxlength="4000" />

        </wi:dataForm>

    </ui:define>
    <ui:define name="tabs">
        <infox:tab status=":status" id="associarPapelTab"
            rendered="#{home.managed}" name="associarPapelTab"
            title="#{eppmessages['tipoProcessoDocumento.papel']}">
            <s:div id="divAssociarPapel">
                <wi:dataForm formId="tipoProcessoDocumentoPapelForm"
                    formTitle="#{eppmessages['form.title']}">
                    <wi:selectOneMenuEntity id="papel"
                        label="#{eppmessages['tipoProcessoDocumentoPapel.papel']}"
                        items="#{classificacaoDocumentoPapelCrudAction.papelItems()}"
                        value="#{classificacaoDocumentoPapelCrudAction.instance.papel}"
                        showLabelSelecione="true" required="true" />
                    <wi:selectOneMenuEnum id="tipoAssinaturaCombo"
                        label="#{eppmessages['classificacaoDocumento.tipoAssinatura']}"
                        items="#{classificacaoDocumentoFacade.getTipoAssinaturaEnumValues()}"
                        value="#{classificacaoDocumentoPapelCrudAction.instance.tipoAssinatura}"
                        required="true" showLabelSelecione="true" />
                    <wi:selectBooleanCheckbox
		                label="#{eppmessages['tipoProcessoDocumentoPapel.podeRedigir']}"
		                id="podeRedigir"
		                value="#{classificacaoDocumentoPapelCrudAction.instance.podeRedigir}">
		                <a:ajax event="change" execute="@this" limitRender="true" />
		            </wi:selectBooleanCheckbox>
                    <ui:define name="buttons">
                        <wi:commandButtonPersist
                            home="#{classificacaoDocumentoPapelCrudAction}"
                            persistAction="classificacaoDocumentoPapelCrudAction.save()" />
                    </ui:define>
                </wi:dataForm>
                <wi:dataTable
                    values="#{tipoProcessoDocumentoPapelList.list(15)}"
                    bean="#{tipoProcessoDocumentoPapelList}"
                    tableTitle="#{classificacaoDocumentoCrudAction.instance} - #{eppmessages['form.title']}"
                    id="tipoProcessoDocumentoPapelList"
                    rowId="#{row.idTipoProcessoDocumentoPapel}"
                    listReRender="divAssociarPapel" showMsg="false">
                    <wi:columnOutputText columnId="papel"
                        columnHeader="#{eppmessages['tipoProcessoDocumentoPapel.papel']}"
                        value="#{row.papel}" />
                    <wi:columnEnum columnId="tipoAssinatura"
                        columnHeader="#{eppmessages['classificacaoDocumento.tipoAssinatura']}"
                        value="#{row.tipoAssinatura}" />
                    <wi:columnOutputText colummId="podeRedigir"
                    	columnHeader="#{eppmessages['tipoProcessoDocumentoPapel.podeRedigir']}"
                    	value="#{row.podeRedigir ? 'Sim' : 'Não'}"
                    	hideOrder="true"/>
                    <ui:define name="headerToolBar" />
                    <ui:define name="toolBar">
                        <wi:toolBar
                            url="#{a4jSkin.imgFolder}/remove.png"
                            title="Remover registro"
                            action="classificacaoDocumentoPapelCrudAction.remove(row)"
                            render="divAssociarPapel, pageBodyDialogMessage"
                            execute="@this"
                            onclick="return confirm('Deseja remover o registro?');"
                            id="removeButton" />
                    </ui:define>
                </wi:dataTable>
            </s:div>
        </infox:tab>
        <infox:tab status=":status" id="extensoesTab"
            rendered="#{home.managed and home.instance.canDoUpload()}" name="extensoesTab"
            title="#{eppmessages['tipoProcessoDocumento.extensoesTab']}">
            <wi:dataForm formId="extensoesForm"
                formTitle="#{eppmessages['form.title']}">
                <wi:inputText id="nomeExtensao"
                    value="#{extensaoArquivoCrudAction.instance.nomeExtensao}"
                    required="true"
                    label="#{eppmessages['tipoProcessoDocumento.tipoArquivo']}"
                    maxlength="30" />
                <wi:inputText id="extensao"
                    value="#{extensaoArquivoCrudAction.instance.extensao}"
                    required="true"
                    label="#{eppmessages['tipoProcessoDocumento.tipoExtensao']}"
                    maxlength="30" >
                    <f:validator validatorId="extensaoDocumentoValidator" />
                </wi:inputText>
                <wi:inputNumber id="tamanho"
                    value="#{extensaoArquivoCrudAction.instance.tamanho}"
                    required="true"
                    label="#{eppmessages['tipoProcessoDocumento.tamanho']}"
                    maxlength="30" />
                <wi:selectBooleanRadio id="isPaginavel"
                    label="#{eppmessages['tipoProcessoDocumento.hasTamanhoPagina']}"
                    value="#{extensaoArquivoCrudAction.instance.paginavel}">
                    <a:ajax event="change"
                        render="tamanhoPaginaDiv"
                        limitRender="true" status=":status"
                        execute="@this" />
                </wi:selectBooleanRadio>
                <s:div id="tamanhoPaginaDiv">
                    <wi:inputNumber id="tamanhoPorPagina"
                        value="#{extensaoArquivoCrudAction.instance.tamanhoPorPagina}"
                        required="true"
                        label="#{eppmessages['tipoProcessoDocumento.tamanhoPorPagina']}"
                        maxlength="30" 
                        rendered="#{extensaoArquivoCrudAction.instance.paginavel}"/>
                </s:div>
                <ui:define name="buttons">
                    <wi:commandButton id="saveButton"
                        action="extensaoArquivoCrudAction.save()"
                        reRender="extensoesTab, pageBodyDialogMessage"
                        value="#{eppmessages['crud.persist']}" />
                </ui:define>
            </wi:dataForm>
            <s:div id="divAssociarExtensoes">
                <wi:dataTable id="extensoesList"
                    values="#{extensaoArquivoList.list(15)}"
                    bean="#{extensaoArquivoList}"
                    tableTitle="#{classificacaoDocumentoCrudAction.instance} - Extensões Aceitas"
                    var="row" rows="10">
                    <ui:define name="headerToolBar" />
                    <ui:define name="toolBar">
                        <wi:toolBar
                            url="#{a4jSkin.imgFolder}/remove.png"
                            title="Remover registro"
                            action="extensaoArquivoCrudAction.remove(row)"
                            render="divAssociarExtensoes, pageBodyDialogMessage"
                            execute="@this"
                            onclick="return confirm('Deseja remover o registro?');"
                            id="removeButton" />
                    </ui:define>
                    <wi:columnOutputText columnId="nomeExtensao"
                        columnHeader="#{eppmessages['extensaoArquivo.nomeExtensao']}"
                        value="#{row.nomeExtensao}" />
                    <wi:columnOutputText columnId="extensao"
                        columnHeader="#{eppmessages['extensaoArquivo.extensao']}"
                        value="#{row.extensao}" />
                    <wi:columnOutputText columnId="tamanho"
                        columnHeader="#{eppmessages['extensaoArquivo.tamanho']}"
                        value="#{row.tamanho}" />
                    <wi:columnBoolean columnId="paginavel"
                    	columnHeader="#{eppmessages['extensaoArquivo.paginavel']}"
                    	value="#{row.paginavel}" />
                    <wi:columnOutputText columnId="tamanhoPorPagina"
                    	columnHeader="#{eppmessages['extensaoArquivo.tamanhoPorPagina']}"
                    	value="#{row.tamanhoPorPagina}" />
                </wi:dataTable>
            </s:div>
        </infox:tab>
    </ui:define>
</ui:composition>
