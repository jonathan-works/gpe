<?xml version="1.0" encoding="ISO-8859-1"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
			    xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:c="http://java.sun.com/jstl/core"
				xmlns:wi="http://www.itx.com.br/jsf"
			    xmlns:h="http://java.sun.com/jsf/html"
			    xmlns:rich="http://richfaces.ajax4jsf.org/rich"
				template="/WEB-INF/xhtml/templates/tabbedTemplate.xhtml">
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
-->                       
<ui:define name="title">#{messages['tipoModeloDocumento.titlePage']}</ui:define>

<ui:param name="home" value="#{tipoModeloDocumentoHome}" />

<ui:define name="searchGrid">   
    <h:messages globalOnly="true" styleClass="message" id="globalMessages"/>
    <wi:datagrid 
    	bean="#{tipoModeloDocumentoGrid}" 
    	searchBean="#{tipoModeloDocumentoSearch}" 
    	title="#{messages['tipoModeloDocumento.titleGrid']}"
    	actionButtonLimpar="#{home.newInstance()}"
    />
</ui:define>

<ui:define name="form">
	<c:if test="#{canEdit}">
		<wi:form form="#{tipoModeloDocumentoForm}" 
		formTitle="#{messages['tipoModeloDocumento.titleForm']}"
		persistSemNewInstance="#{true}" />
	</c:if>
	<c:if test="#{not canEdit}">
		<wi:view form="#{tipoModeloDocumentoView}" columns="4" title="#{messages['tipoModeloDocumento.titleView']}"/>
	</c:if>
</ui:define>

		<ui:define name="tabs">
					<rich:tab label="#{messages['tipoModeloDocumento.modeloDocumentoList']}"
					    status=":status"
						id="modeloDocumento"
						rendered="#{home.managed}">
							<wi:datalist bean="#{modeloDocumentoGrid}" 
								gridId="modeloDocumentoGridTab"
								toolBar="toolBarTab"
								searchBean="#{modeloDocumentoSearch}" 
								linkDetalhe="/ModeloDocumento/listView.seam"
								goBackUrl="/TipoModeloDocumento/listView.seam"
								goBackId="#{home.id}"	
								goBackTab="modeloDocumento"
								headerToolBar="none"
								columnList="ativo,tipoModeloDocumento,tituloModeloDocumento"
								title="#{messages['tipoModeloDocumento.modeloDocumentoList']} - #{(tipoModeloDocumentoHome.instance)}"							
							/>
					</rich:tab>

					<rich:tab label="Variáveis"
					    status=":status"
						id="variaveis"
						rendered="#{home.managed}">
						<wi:ajaxDiv id="divM2MtipoDoc">
							<wi:m2mGrid 
								title="Variáveis" 
								gridId="variavelTipoModelo"
								leftGrid="#{variavelTipoModeloGrid}" 
								useDatamodel="false"
								addExpression="variavelTipoModeloHome.addVariavelTipoModelo(row, 'variavelTipoModeloGrid')"
								removeExpression="variavelTipoModeloHome.removeVariavelTipoModelo(row, 'variavelGrid')"
								rightGrid="#{variavelGrid}"
								searchBean="#{variavelSearch}" 
								showLogicOperator="false" 
								showButtonLimpar="true"
								actionButtonLimpar="#{variavelHome.newInstance()}"
								widthExterno="100%" />
						</wi:ajaxDiv>
						
					</rich:tab>
					
					<rich:tab label="Papéis"
						action="#{tipoModeloDocumentoPapelHome.newInstance()}"
					    status=":status"
						id="papeis"
						rendered="#{home.managed}">
						
						<wi:ajaxDiv id="divPapeis">
							<wi:form form="#{tipoModeloDocumentoPapelForm}" 
								home="#{tipoModeloDocumentoPapelHome}"
								formTitle="Papeis"
								reRenderSave="divPapeis" />

							<wi:datalist bean="#{tipoModeloDocumentoPapelGrid}" 
								toolBar="toolBarRemove"
								headerToolBar="none"
										 reRenderRemove="divPapeis"
										 home="#{tipoModeloDocumentoPapelHome}"
										 title="Papéis associados ao tipo de modelo #{(tipoModeloDocumentoHome.instance)}"/>	
						</wi:ajaxDiv>
					</rich:tab>					

		</ui:define> 
 
</ui:composition>