<?xml version="1.0" encoding="ISO-8859-1"?>

<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
-->       
                
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
			    xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:wi="http://www.itx.com.br/jsf"
			    xmlns:h="http://java.sun.com/jsf/html"
			    xmlns:a="http://richfaces.org/a4j"
			    xmlns:f="http://java.sun.com/jsf/core"
			    xmlns:s="http://jboss.org/schema/seam/taglib"
			    xmlns:rich="http://richfaces.ajax4jsf.org/rich"
			    template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">
						    
<ui:define name="title">#{messages['localizacao.titlePage']}</ui:define>
<ui:param name="home" value="#{localizacaoHome}" />

<ui:define name="searchGrid">   
    <h:messages globalOnly="true" styleClass="message" id="globalMessages"/>
    <wi:datagrid useDatamodel="true"
		    	 datamodel="#{localizacaoHome.searchTree2GridList.list}"
		    	 bean="#{localizacaoGrid}" 
		    	 searchBean="#{localizacaoSearch}" 
		    	 title="#{messages['localizacao.titleGrid']}"
		    	 columnList="localizacao, estrutura, ativo"
		    	 headerToolBar="none"
		    	 treeMode="true"
		    	 toolBar="toolBarTree"
		    	 reRenderButtonLimpar="#{localizacaoHome.newInstance()}" />
</ui:define>

<ui:define name="form">
	<wi:form form="#{localizacaoForm}" 
	         formTitle="#{messages['localizacao.titleForm']}"
	         persistSemNewInstance="true"/>
</ui:define>

<ui:define name="tabs">
	<rich:tab label="#{messages['localizacao.itemTipoDocumentoList']}"
		      status=":status"
			  id="itemTipoDocumento"
			  action="#{itemTipoDocumentoHome.newInstance()}"
			  rendered="#{home.managed}">

		<wi:dataForm home="#{itemTipoDocumentoHome}"
					 formId="itemTipoDocumentoForm"
					 formTitle="Adicionar Grupo de Documento à Localização - #{(localizacaoHome.instance)}">
				
			<wi:suggest id="orgaoJulgador"
						bean="#{grupoModeloDocumentoSuggest}"
					    assignTo="itemTipoDocumentoHome.instance.grupoModeloDocumento"
						label="Grupo Documento"/>				
		</wi:dataForm>
		<br/>		
	  	<wi:dataTable id="itemTipoDocumentoList"
					  values="#{itemTipoDocumentoList.list(15)}" 
		              bean="#{itemTipoDocumentoList}"
					  tableTitle="Grupo Documento" 
					  rowId="#{row.idItemTipoDocumento}">
						  
			<ui:define name="toolBar">
				<a:form>
					<div style="width: 35px">
						<a:region renderRegionOnly="false">
							<a:commandLink	action="#{itemTipoDocumentoHome.remove(row)}"
											rendered="#{wi:get(canEdit,true)}"
											limitToList="true"
											status=":status"
											reRender="pageBody"
											onclick="if(!confirm('Confirma?')) return false;">
								<h:graphicImage	url="/img/remove.png" 
												title="Remover registro"
												style="opacity:0.15; #{style}"
												onmouseover="this.style.opacity=1"
												onmouseout ="this.style.opacity=0.15"/>
							</a:commandLink>
						</a:region>
					</div>
				</a:form>							
			</ui:define>
				
			<wi:columnOutputText columnId="grupoModeloDocumento"
								 columnHeader="Grupo Documento"
								 value="#{row.grupoModeloDocumento}" />
									 
		</wi:dataTable>
	</rich:tab>
	
	<rich:tab label="#{messages['localizacao.localizacaoTurno']}"
		      status=":status"
			  id="localizacaoTurnoTab"
			  action="#{localizacaoTurnoAction.newInstance(localizacaoHome.instance)}"
			  rendered="#{home.managed}">
		<a:form id="localizacaoTurnoForm">
			<wi:turnoCalendar handler="#{localizacaoTurnoAction.turnoHandler}" /> 
			
			<a:commandButton action="#{localizacaoTurnoAction.gravarTurnos()}" value="Gravar" />
		</a:form>
	</rich:tab>
	
</ui:define> 
 
</ui:composition>