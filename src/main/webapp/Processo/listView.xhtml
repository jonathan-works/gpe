<?xml version="1.0" encoding="ISO-8859-1"?>

<!-- $Id: listView.xhtml 750 2010-08-24 14:10:58Z danielsilva $ -->


<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:s="http://jboss.com/products/seam/taglib"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:c="http://java.sun.com/jstl/core"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:wi="http://www.itx.com.br/jsf"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:a="http://richfaces.org/a4j"
				xmlns:rich="http://richfaces.ajax4jsf.org/rich"
				template="/WEB-INF/xhtml/templates/core/menuTemplate.xhtml">
                       
	<ui:define name="title">#{messages['processo.titlePage']}</ui:define>
	
	<ui:param name="action" value="#{iniciarProcessoAction}"/>
	
	<ui:define name="body">
		<rich:spacer height="5%"/>
		<wi:dataForm formId="iniciarProcesso"
					 formTitle="#{messages['processo.titleFormIniciarProcesso']}"
					 renderRegionOnly="true"
					 requiredForm="false">
			<rich:dataTable id="natCatFluxoTable"
							value="#{action.naturezaCategoriaFluxoList}"
							var="row"
							rows="10"
							style="width: 60%">
				<rich:column style="width: 2%">
					<a:commandLink action="#{action.onSelectNatCatFluxo(row)}"
	                			   ajaxSingle="true"
	                               reRender="itemDiv">
	                    <h:graphicImage url="/img/jbpm/StartState.gif"/>
	                </a:commandLink>
				</rich:column>
				<rich:column style="width: 30%">
					<f:facet name="header">
						<h:outputText value="#{messages['naturezaCategoriaFluxo.natureza']}" />
					</f:facet>
					<h:outputText value="#{row.natureza}"/>
				</rich:column>
				<rich:column style="width: 30%">
					<f:facet name="header">
						<h:outputText value="#{messages['naturezaCategoriaFluxo.categoria']}" />
					</f:facet>
					<h:outputText value="#{row.categoria}"/>
				</rich:column>
			</rich:dataTable>
			<rich:datascroller for="natCatFluxoTable"
							   lastPageMode="full"
							   id="dsNatCatFluxoTable"
							   align="left"
							   renderIfSinglePage="false"/>
			<br/>
			<s:div id="itemDiv">
				<rich:dataTable id="itemTable"
								value="#{action.itemList}"
								var="row"
								rows="10"
								rendered="#{action.renderedByItem}"
								style="width: 30%">
					<rich:column style="width: 10%">
						<a:commandLink action="#{action.onSelectItem(row)}"
                				   ajaxSingle="true"
                				   oncomplete="window.open('#{util.contextPath}/Processo/movimentar.seam?idProcesso=#{action.processoEpa.idProcesso}', '#{processoHome.instance.idProcesso}popUpFluxo', 'fullscreen=1, resizable=yes,scrollbars=1'); 
								  			  window.location='#{util.contextPath}/Painel/list.seam';">
                    		<h:graphicImage url="/img/start.gif"/>
                		</a:commandLink>
					</rich:column>
					<rich:column style="width: 90%">
						<f:facet name="header">
							<h:outputText value="#{messages['item.descricaoItem']}" />
						</f:facet>
						<h:outputText value="#{row.item.caminhoCompletoToString()}"/>
					</rich:column>
				</rich:dataTable>
				<rich:datascroller for="itemTable"
								   lastPageMode="full"
								   id="dsItemTable"
								   align="right"
								   renderIfSinglePage="false"/>
			</s:div>
			<ui:define name="buttons" value="false"/>
		</wi:dataForm>
	</ui:define>

</ui:composition>