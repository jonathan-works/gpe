<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf">

    <wi:dataForm formId="pessoaFisicaForm"
        formTitle="#{eppmessages['pessoaFisica.formTitle']}"
        rendered="#{participantesController.podeAdicionarPartesFisicas()}">
        
        <wi:inputCpf id="cpf"
               value="#{participantesController.participantePessoaFisica.pessoa.cpf}"
               label="#{eppmessages['pessoaFisica.cpf']}"
               assignTo="#{participantesController.participantePessoaFisica.pessoa.cpf}"
               required="true">
               <a:ajax event="blur"
                listener="#{participantesController.searchByCpf()}"
                execute="@this" render="loadedByCPF" limitRender="true" />
           </wi:inputCpf>
           <h:panelGroup id="loadedByCPF">
            <wi:inputText id="nome"
                value="#{participantesController.participantePessoaFisica.pessoa.nome}"
                label="#{eppmessages['pessoaFisica.nome']}" required="true" />
                
            <wi:inputEmail id="email"
            	value="#{participantesController.email}"
            	label="#{eppmessages['pessoaFisica.email']}" />
                
            <wi:inputDate id="dataNascimento"
                value="#{participantesController.participantePessoaFisica.pessoa.dataNascimento}"
                label="#{eppmessages['pessoaFisica.dataNascimento']}" />
                
            <wi:selectOneMenuEntity id="tipoPartes"
				items="#{participantesController.tipoPartes}"
				value="#{participantesController.participantePessoaFisica.tipoParte}"
				label="#{eppmessages['participanteProcesso.tipoParticipante']}"
				required="true"
				showLabelSelecione="true" />
				
			<wi:selectOneMenuEntity id="participanteSuperior"
				items="#{participantesController.participantesAtivos}"
				value="#{participantesController.participantePessoaFisica.participantePai}"
				label="#{eppmessages['participanteProcesso.superior']}"
				showLabelSelecione="true"/>
				
			<wi:inputDate id="dataInicio"
				value="#{participantesController.participantePessoaFisica.dataInicio}"
				label="#{eppmessages['participanteProcesso.dataInicioParticipacao']}" />
					
			<wi:inputDate id="dataFim"
				value="#{participantesController.participantePessoaFisica.dataFim}"
				label="#{eppmessages['participanteProcesso.dataFimParticipacao']}" />
        </h:panelGroup>
		
        <!-- TODO: Verificar porque este botão não funciona quando é um wi:commandButton -->
        <ui:define name="buttons">
            <a:commandButton id="pessoaFisicaSaveButton"
                action="#{participantesController.includePessoaFisica()}"
                render="buscaDiv, pessoasListDiv, storeDiv, pessoaFisicaForm"
                value="#{eppmessages['crud.persist']}" 
                styleClass="#{wi:get(styleClass, 'buttons')}" />
        </ui:define>

    </wi:dataForm>
    <br />
</ui:composition>
