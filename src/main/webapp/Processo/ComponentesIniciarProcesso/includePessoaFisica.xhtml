<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf">


    <wi:dataForm formId="pessoaFisicaForm"
        formTitle="#{messages['pessoaFisica.formTitle']}" panelWidth="70%"
        rendered="#{not empty partesController.tipoPartes and not partesController.apenasPessoaJuridica()}">

        <wi:inputCpf id="cpf"
            value="#{partesController.pessoaFisica.cpf}"
            label="#{messages['pessoaFisica.cpf']}"
            assignTo="#{partesController.pessoaFisica.cpf}"
            required="true">
            <a:ajax event="blur"
                listener="#{partesController.searchByCpf()}"
                execute="@this" render="loadedByCPF" limitRender="true" />
        </wi:inputCpf>
        <h:panelGroup id="loadedByCPF">
            <wi:inputText id="nome"
                value="#{partesController.pessoaFisica.nome}"
                label="#{messages['pessoaFisica.nome']}" required="true" />
            <wi:inputDate id="dataNascimento"
                value="#{partesController.pessoaFisica.dataNascimento}"
                label="#{messages['pessoaFisica.dataNascimento']}"
                required="true" />
        </h:panelGroup>
        <ui:define name="buttons">
            <!-- TODO: Verificar porque usar diretamente o wi:commandButton lanÃ§a uma org.jboss.seam.ui.UnauthorizedCommandException -->
            <a:commandButton id="saveButton"
                action="#{partesController.includePessoaFisica()}"
                render="includePessoaFisicaDiv, pessoasListDiv, storeDiv, pessoaFisicaForm"
                value="#{messages['crud.persist']}"
                styleClass="buttons #{wi:get(styleClass, 'buttons')}" />
        </ui:define>

    </wi:dataForm>
    <br />
</ui:composition>
