<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf">

    <wi:dataForm formId="pessoaJuridicaForm"
        formTitle="#{eppmessages['pessoaJuridica.formTitle']}"
        rendered="#{participantesController.podeAdicionarPartesJuridicas()}">
        
        <wi:inputCnpj id="cnpj"
               value="#{participantesController.participantePessoaJuridica.pessoa.cnpj}"
               label="#{eppmessages['pessoaJuridica.cnpj']}"
               assignTo="#{participantesController.participantePessoaJuridica.pessoa.cnpj}"
               required="true">
               <a:ajax event="blur" execute="@this"
                   render="loadedByCNPJ" limitRender="true"
                   listener="#{participantesController.searchByCnpj()}" />
           </wi:inputCnpj>
           <h:panelGroup id="loadedByCNPJ">
            <wi:inputText id="nome"
                value="#{participantesController.participantePessoaJuridica.pessoa.nome}"
                label="#{eppmessages['pessoaJuridica.nomeFantasia']}"
                required="true" />
                
            <wi:inputText id="razao"
                value="#{participantesController.participantePessoaJuridica.pessoa.razaoSocial}"
                label="#{eppmessages['pessoaJuridica.razaoSocial']}"
                required="true" />
                
            <wi:selectOneMenuEntity id="tipoPartes"
				items="#{participantesController.tipoPartes}"
				value="#{participantesController.participantePessoaJuridica.tipoParte}"
				label="#{eppmessages['participanteProcesso.tipoParticipante']}"
				required="true"
				showLabelSelecione="true" />
				
			<wi:selectOneMenuEntity id="participanteSuperior"
				items="#{participantesController.participantesAtivos}"
				value="#{participantesController.participantePessoaJuridica.participantePai}"
				label="#{eppmessages['participanteProcesso.superior']}"
				showLabelSelecione="true"/>
				
			<wi:inputDate id="dataInicio"
				value="#{participantesProcessoController.participantePessoaJuridica.dataInicio}"
				label="#{eppmessages['participanteProcesso.dataInicioParticipacao']}" />
					
			<wi:inputDate id="dataFim"
				value="#{participantesProcessoController.participantePessoaJuridica.dataFim}"
				label="#{eppmessages['participanteProcesso.dataFimParticipacao']}" />
				
        </h:panelGroup>
				
        <ui:define name="buttons">
            <a:commandButton id="pessoaJuridicaSaveButton"
                action="#{participantesController.includePessoaJuridica()}"
                render="buscaDiv, pessoasListDiv, storeDiv, pessoaJuridicaForm"
                value="#{eppmessages['crud.persist']}" 
                styleClass="#{wi:get(styleClass, 'buttons')}"/>
        </ui:define>

    </wi:dataForm>
    <br />
</ui:composition>
