<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:infox="http://www.infox.com.br/jsf"
    xmlns:p="http://primefaces.org/ui"
	xmlns:wi="http://www.itx.com.br/jsf">
    <ui:param name="processo" value="#{wi:get(processo, processoEpaHome.instance)}"></ui:param>
    <f:event type="preRenderView" listener="#{linkAplicacaoExternaViewController.setProcesso(processo)}" />
    <infox:div id="linkAplicacaoExternaContainer">
        <h:form>
            <fieldset>
                <legend><h:outputText value="#{infoxMessages['crud.linkAplicacaoExterna.form']}" /></legend>
                <p:outputPanel rendered="#{not empty linkAplicacaoExternaViewController.entity}">
                    <wi:inputText id="codigo" label="#{infoxMessages['crud.linkAplicacaoExterna.codigo']}" value="#{linkAplicacaoExternaViewController.entity.codigo}" required="true"/>
                    <wi:inputText id="descricao" label="#{infoxMessages['crud.linkAplicacaoExterna.descricao']}" value="#{linkAplicacaoExternaViewController.entity.descricao}" required="true"/>
                    <wi:inputText id="url" label="#{infoxMessages['crud.linkAplicacaoExterna.url']}" value="#{linkAplicacaoExternaViewController.entity.url}" required="true"/>
                    <h:commandButton styleClass="buttons" value="#{infoxMessages['crud.persist']}" action="#{linkAplicacaoExternaViewController.salvar}">
                        <p:ajax update="@form:@parent :pageBodyDialogMessage" process="@parent" />
                    </h:commandButton>
                </p:outputPanel>
                <p:outputPanel rendered="#{empty linkAplicacaoExternaViewController.entity}">
                    <h:commandButton styleClass="buttons" value="#{infoxMessages['crud.new']}" action="#{linkAplicacaoExternaViewController.criar}">
                        <p:ajax update="@form :pageBodyDialogMessage" process="@this" />
                    </h:commandButton>
                </p:outputPanel>
            </fieldset>
        </h:form>
        <fieldset>
            <legend><h:outputText value="#{infoxMessages['crud.linkAplicacaoExterna.pageTitle']}" /></legend>
            <ui:repeat var="link" value="#{linkAplicacaoExternaViewController.links}">
                <h:commandButton type="button" styleClass="buttons" value="#{link.descricao}" onclick="infox.openPopUp('#{link.descricao}','#{linkAplicacaoExternaViewController.retrieveUrlWithToken(link)}')"/>
            </ui:repeat>
        </fieldset>
    </infox:div>
</ui:composition>