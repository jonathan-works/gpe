<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:a="http://richfaces.org/a4j"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:wi="http://www.itx.com.br/jsf"
  xmlns:infox="http://www.infox.com.br/jsf"
  template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">
  <ui:define name="title">#{eppmessages['consultaProcesso.titlePage']}</ui:define>
  <ui:define name="body">
    <rich:collapsiblePanel
      switchType="client"
      header="#{eppmessages['processo.titleView']} #{consultaController.processo.numeroProcesso}"
      expanded="false">
      <h:panelGrid
        columns="2"
        width="100%"
        columnClasses="viewColumn">
        <wi:outputText
          id="dataInicio"
          label="#{eppmessages['processo.dataInicio']}"
          value="#{consultaController.processo.dataInicio}">
          <f:convertDateTime pattern="dd/MM/yyyy kk:mm" />
        </wi:outputText>
        <wi:outputText
          id="usuarioCadastro"
          label="#{eppmessages['processo.usuarioCadastroProcesso']}"
          value="#{consultaController.processo.usuarioCadastro}" />
      </h:panelGrid>
    </rich:collapsiblePanel>
    <infox:tabPanel
      headerSpacing="2"
      activeTab="#{consultaController.tab}">
      <h:form>
        <infox:tabHeaders />
      </h:form>
      <infox:tab
        id="form"
        name="form"
        immediate="true"
        status=":status"
        title="#{eppmessages['acaoProcesso.menuText']}">
        <ui:include
          src="/WEB-INF/xhtml/components/grid/movimentacoesProcessoGrid.xhtml" />
      </infox:tab>
      <infox:tab
        id="tabAnexos"
        name="tabAnexos"
        immediate="true"
        actionListener="#{documentoProcessoAction.onClickDocumentosTab()}"
        status=":status"
        title="#{eppmessages['processo.documentos']}">
		<ui:include src="/Processo/pastaDocumento.xhtml" />
      </infox:tab>
      <infox:tab
        id="tabAnexar"
        name="tabAnexar"
        immediate="true"
        status=":status"
        title="#{eppmessages['processoDocumento.anexarDocumento']}"
        rendered="#{empty consultaController.processo.dataFim}"
        action="#{anexoController.onClickTabAnexar(consultaController.processo)}">
        <wi:ajaxDiv id="divAnexarDocumentos">
          <wi:dataForm
            formId="anexarDocumentosForm"
            formTitle="#{eppmessages['processoDocumento.anexarDocumento']}">
            <ui:include src="/Processo/anexarDocumentos.xhtml" />
            <ui:define name="buttons" />
          </wi:dataForm>
        </wi:ajaxDiv>
      </infox:tab>
      <infox:tab
        id="documentoFisicoTab"
        name="documentoFisicoTab"
        action="#{localizacaoDocumentoFisicoCrudAction.setProcesso(consultaController.processo)}"
        title="#{eppmessages['documentoFisico.titleTab']}">
        <ui:decorate
          id="frameDecorate"
          template="../../WEB-INF/xhtml/templates/core/include/frame.xhtml">
          <ui:define name="title">#{eppmessages['documentoFisico.titleTab']}</ui:define>
          <s:div id="documentoFisicoDiv">
            <wi:dataTable
              id="documentoFisicoTable"
              values="#{localizacaoDocumentoFisicoCrudAction.documentoFisicoList}"
              var="row"
              rows="10"
              searchFormStyleClass="hidden">
              <ui:define name="toolBar" />
              <ui:define name="headerToolBar" />
              <wi:columnOutputText
                columnId="localizacaoFisica"
                columnHeader="#{eppmessages['documentoFisico.localizacaoFisica']}"
                value="#{row.localizacaoFisica.caminhoCompletoToString()}"
                hideOrder="true" />
              <wi:columnOutputText
                columnId="descricao"
                columnHeader="#{eppmessages['documentoFisico.descricaoDocumentoFisico']}"
                value="#{row.descricaoDocumentoFisico}"
                hideOrder="true" />
            </wi:dataTable>
          </s:div>
        </ui:decorate>
      </infox:tab>
      <infox:tab
        id="tabPartesDoProcesso"
        name="tabPartesDoProcesso"
        immediate="true"
        status=":status"
        rendered="#{processoHandler.hasPartes()}"
                title="#{eppmessages['participanteProcesso.participantes']}"
                action="#{participanteProcessoList.entity.setProcesso(consultaController.processo)}">
        <ui:include src="/Processo/parteProcessoGridRO.xhtml" />
      </infox:tab>
      <div>
              <wi:commandButton
              	id="btnVoltar"
                onclick="infox.redirect({url:'#{pathResolver.contextPath}/Processo/Consulta/listView.seam'})"
                value="#{eppmessages['page.return']}" />
      </div>
    </infox:tabPanel>

  </ui:define>
</ui:composition>
