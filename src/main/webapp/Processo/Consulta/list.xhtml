<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
-->
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf"
    template="/WEB-INF/xhtml/templates/core/defaultTemplate.xhtml">

    <ui:param
        name="pageTitle"
        value="Detalhes do Processo" />
    <ui:define name="title">#{pageTitle}</ui:define>

    <ui:define name="body">

        <h:messages
            globalOnly="true"
            styleClass="message"
            id="globalMessages" />

        <h:form>
            <rich:tabPanel
                headerSpacing="2"
                activeItem="#{processoHome.tab}">
                <rich:itemChangeListener binding="#{processoHome}" />
                <rich:itemChangeListener
                    binding="#{processoDocumentoHome}" />
                <rich:tab
                    id="form"
                    name="form"
                    header="#{messages['acaoProcesso.menuText']}"
                    immediate="true"
                    status=":status">

                    <ui:include
                        src="/WEB-INF/xhtml/components/grid/movimentacoesProcessoGrid.xhtml" />
                </rich:tab>

                <rich:tab
                    id="tabAnexos"
                    name="tabAnexos"
                    header="Documentos do Processo"
                    immediate="true"
                    status=":status">
                    <wi:dataTable
                        values="#{processoDocumentoList.list(15)}"
                        bean="#{processoDocumentoList}"
                        tableTitle="Documentos do Processo"
                        id="processoDocumentoList"
                        rowId="#{row.idProcessoDocumento}">
                        <ui:define name="toolBar"></ui:define>
                        <ui:define name="headerToolBar"></ui:define>
                        <wi:columnOutputText
                            columnId="usuarioInclusao"
                            columnHeader="Usuário"
                            value="#{row.usuarioInclusao}" />
                        <wi:columnOutputText
                            columnId="dataInclusao"
                            columnHeader="Data"
                            value="#{row.dataInclusao}" />
                        <wi:columnOutputText
                            columnId="processoDocumento"
                            columnHeader="Processo Documento"
                            value="#{row.processoDocumento.equals('null') ? '-':row.processoDocumento}" />
                        <wi:columnOutputText
                            columnId="processoDocumentoBin"
                            columnHeader="Processo Documento Bin"
                            value="#{row.processoDocumentoBin}" />
                        <wi:columnOutputText
                            columnId="processoDocumentoBin.sizeFormatado"
                            columnHeader="Tamanho: "
                            value="#{row.processoDocumentoBin.sizeFormatado}" />
                    </wi:dataTable>
                </rich:tab>

                <rich:tab
                    id="tabAnexar"
                    name="tabAnexar"
                    header="Anexar Documento"
                    immediate="true"
                    status=":status">
                    <wi:ajaxDiv id="divAnexarDocumentos">
                        <wi:dataForm
                            formId="anexarDocumentosForm"
                            formTitle="#{messages['processoDocumento.anexarDocumento']}">
                            <ui:include
                                src="/WEB-INF/xhtml/components/form/anexarDocumento.xhtml" />
                            <ui:include
                                src="/WEB-INF/xhtml/components/form/buttons/anexarDocumentoButtons.xhtml" />
                            <ui:define name="buttons" />
                        </wi:dataForm>
                    </wi:ajaxDiv>
                </rich:tab>

                <rich:tab
                    id="tabPartesDoProcesso"
                    name="tabPartesDoProcesso"
                    header="#{messages['parteProcesso.partes']}"
                    immediate="true"
                    status=":status"
                    rendered="#{processoHandler.hasPartes()}">
                    <ui:include
                        src="/Processo/parteProcessoGridRO.xhtml" />
                </rich:tab>
            </rich:tabPanel>
        </h:form>

    </ui:define>

</ui:composition>
