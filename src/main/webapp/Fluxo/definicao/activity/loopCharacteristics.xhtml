<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j" xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib" xmlns:wi="http://www.itx.com.br/jsf">
    <ui:param name="id" value="#{empty id ? 'id' : id}" />
    <ui:param name="activity" value="#{loopElement}" />
    <rich:collapsiblePanel id="loopCharacteristicsPanel" expanded="true" switchType="client"
        header="#{infoxMessages['process.def.activity.loopCharacteristics']}" style="text-align:center;">
        <h:form>
            <wi:selectBooleanCheckbox id="isLoop" value="#{activity.loopNode}"
                label="#{infoxMessages['process.def.activity.loop']}">
                <a:ajax event="change" render="loopCharacteristicsPanel" execute="@this"
                    onbeforesubmit="infox.showLoading();" oncomplete="infox.hideLoading();" />
            </wi:selectBooleanCheckbox>
            <wi:selectBooleanCheckbox id="isMultiInstance" rendered="#{activity.loopNode}"
                value="#{activity.multiInstance}" label="#{infoxMessages['process.def.activity.loop.multiInstance']}">
                <a:ajax event="change" render="loopCharacteristicsPanel" execute="@this"
                    onbeforesubmit="infox.showLoading();" oncomplete="infox.hideLoading();" />
            </wi:selectBooleanCheckbox>
        </h:form>
        <s:fragment rendered="#{activity.loopNode}">
            <s:fragment rendered="#{activity.multiInstance}">
                <ui:include src="multiInstanceLoop.xhtml" />
            </s:fragment>
            <s:fragment rendered="#{not activity.multiInstance}">
                <ui:include src="standardLoop.xhtml" />
            </s:fragment>
        </s:fragment>
    </rich:collapsiblePanel>
</ui:composition>
