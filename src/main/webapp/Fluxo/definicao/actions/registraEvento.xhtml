<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:a="http://richfaces.org/a4j"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:rich="http://richfaces.org/rich"
     xmlns:s="http://jboss.org/schema/seam/taglib"
     xmlns:wi="http://www.itx.com.br/jsf">

	<s:div id="registraEventoDiv">
	
		<rich:panel header="Registra evento:">
		
			<h:form id="registraEventoForm">
			
				<wi:pickList id="agrupamentos"
                     value="#{actionTemplate.registrados}"
                     itemValues="#{actionTemplate.agrupamentos}"
                     itemLabel="#{var}">
                     
					<wi:ajaxSupport />
					
				</wi:pickList>
			
				<script>
					function setCreatedExpression() {
						var textArea = document.getElementById('processDefinition:transitionConditionForm:conditionInputDecoration:conditionInput');
						var createdExpression = document.getElementById('processDefinition:registraEventoForm:createdExpression').innerHTML;
						var modalPanel = document.getElementById('processDefinition:transitionCondition');
						textArea.value = createdExpression;
						modalPanel.hide();
						textArea.onChange();
					}
				</script>
			
				<a:commandButton value="OK"
                     oncomplete="setCreatedExpression()"
                     styleClass="buttons buttons"
                     render="createdExpression"
                     limitRender="true"
                     action="#{actionTemplate.createExpression}" />

				<h:outputText id="createdExpression" value="#{actionTemplate.createdExpression}" />
					
			</h:form>

		</rich:panel>
		
	</s:div>

</ui:composition>