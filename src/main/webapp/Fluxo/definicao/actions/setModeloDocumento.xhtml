<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a="http://richfaces.org/a4j">

    <ui:param name="variavel" value="#{processBuilder.taskFitter.currentTask.currentVariable}" />
    
    <s:div id="modeloDocumentoDiv">
    
        <rich:panel header="Modelo de documento: #{variavel.name}">
        
            <wi:ajaxDiv id="divM2MVar">
	            <div class="picklist-div">
					<rich:panel
						header="#{messages['associatedModeloDocumentoVariavel.titleGrid']}"
						id="associatedModeloDocumentoVariavelListPanel"
						bodyClass="dtable-p-b"
						styleClass="dtable-p picklist"
						>
						<rich:dataTable
							value="#{variavel.modeloDocumentoList}"
							id="associatedModeloDocumentoVariavelList"
							rowKeyVar="key"
							styleClass="dtable rf-dt-crud picklist-dt"
							var="row">
							
							<wi:columnOutputText
						        columnId="tituloModeloDocumento"
						        columnHeader="#{messages['associatedModeloDocumentoVariavel.tituloModeloDocumento']}"
						        value="#{row}" />
						        
				    		<rich:column
								styleClass="dt-toolbar-col">
								<h:form>
	                                <a:commandLink limitRender="true"
	                                    render="divM2MVar, modeloDocumentoDiv"
	                                    action="#{variavel.removeModelo(row)}">
	                                    <h:graphicImage url="/img/grid/copyRight.gif" title="Remover" />
	                                </a:commandLink>
	                        	</h:form>
							</rich:column>
							
						</rich:dataTable>
					</rich:panel>
				</div>
                <div class="picklist-div">
					<wi:dataTable
					    values="#{associativeModeloDocumentoList.list(15)}"
					    bean="#{associativeModeloDocumentoList}"
					    tableTitle="#{messages['associativeModeloDocumento.titleGrid']}"
					    id="associativeModeloDocumentoList"
					    rowId="#{row.idModeloDocumento}"
					    panelStyleClass="picklist"
					    styleClass="picklist-dt">
                        
                        <ui:define name="searchForm">
                        
                            <wi:searchForm formId="pesquisarModeloDocumentoForm" formTitle="#{messages['searchForm.title']}">
                                
                                <wi:inputText id="tituloModeloDocumento"
                                    label="#{messages['associativeModeloDocumento.tituloModeloDocumento']}"
                                    value="#{associativeModeloDocumentoList.entity.tituloModeloDocumento}"
                                    maxlength="150" />
                                    
                            </wi:searchForm>
                        </ui:define>
                        <ui:define name="headerToolBar" />
                        
                        <ui:define name="toolBar">
                        
                            <h:form>
                            
                                <a:commandLink limitRender="true" render="divM2MVar" action="#{variavel.addModelo(row)}">
                                
                                    <h:graphicImage url="/img/grid/copyLeft.gif" title="Adicionar" />
                                        
                                </a:commandLink>
                                
                            </h:form>
                            
                        </ui:define>
                        
                        <wi:columnOutputText
                        	columnId="tituloModeloDocumento"
                            columnHeader="#{messages['associativeModeloDocumento.tituloModeloDocumento']}"
                            value="#{row}" />
					</wi:dataTable>
				</div>
                
            </wi:ajaxDiv>
            
        </rich:panel>
        
    </s:div>

</ui:composition>