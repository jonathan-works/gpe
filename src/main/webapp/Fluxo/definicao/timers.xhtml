<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
	 xmlns:ui="http://java.sun.com/jsf/facelets"
	 xmlns="http://www.w3.org/1999/xhtml"
	 xmlns:a="http://richfaces.org/a4j"
	 xmlns:f="http://java.sun.com/jsf/core"
	 xmlns:h="http://java.sun.com/jsf/html"
	 xmlns:rich="http://richfaces.org/rich"
	 xmlns:s="http://jboss.org/schema/seam/taglib"
	 xmlns:wi="http://www.itx.com.br/jsf">
	

    <!--
  IBPM - Ferramenta de produtividade Java
  Copyright (c) 1986-2009 Infox Tecnologia da Informação Ltda.
 
  Este programa é software livre; você pode redistribuí-lo e/ou modificá-lo 
  sob os termos da GNU GENERAL PUBLIC LICENSE (GPL) conforme publicada pela 
  Free Software Foundation; versão 2 da Licença.
  Este programa é distribuído na expectativa de que seja útil, porém, SEM 
  NENHUMA GARANTIA; nem mesmo a garantia implícita de COMERCIABILIDADE OU 
  ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
  
  Consulte a GNU GPL para mais detalhes.
  Você deve ter recebido uma cópia da GNU GPL junto com este programa; se não, 
  veja em http://www.gnu.org/licenses/  
-->
    <rich:panel
		 bodyClass="panel"
		 >
		

        <s:div
			 id="timersDiv"
			 >
			

            <ui:param
				 name="node"
				 value="#{nodeFitter.nodeHandler}" />
            <ui:decorate template="dataTable.xhtml">
				
                <ui:param
					 name="values"
					 value="#{node.timerList}" />
                <ui:param
					 name="styleClass"
					 value="tabelaVariaveis" />
                <ui:param
					 name="id"
					 value="timersTable" />
                <ui:param
					 name="style"
					 value="width:100%" />
                <ui:define name="headerToolBar">
					
                    <a:commandLink
						 action="#{node.addTimer()}"
						 execute="@this"
						 immediate="true"
						 render="timersDiv,timerDiv"
						 limitRender="true">
						
                        <h:graphicImage
							 url="/img/add.gif"
							 title="Novo temporizador"
							  />
                    
					</a:commandLink>
                
				</ui:define>
                <ui:define name="toolBar">
					
                    <h:graphicImage
						 title="Excluir temporizador"
						 
						 url="/img/remove.png">
						
                        <a:ajax
							 event="click"
							 listener="#{node.removeTimer(row)}"
							 onbeforesubmit="if(!confirm('Confirma?')) return false;"
							 execute="@this"
							 render="timersDiv"
							 limitRender="true" />
                    
					</h:graphicImage>
                
				</ui:define>
                <ui:define name="columns">
					
                    <rich:column>
						
                        <f:facet name="header">Temporizadores</f:facet>
                        <ui:param
							 name="current"
							 value="#{row == nodeFitter.nodeHandler.currentTimer}" />
                        <ui:param
							 name="styleTimerName"
							 value="#{current ? 'font-weight:bold' : ''}" />
                        <s:div >
							
                            <a:commandLink
								 action="#{node.setCurrentTimer(row)}"
								 execute="@this"
								 render="timersDiv,timerDiv"
								 limitRender="true">
								
                                <h:outputText
									 value="#{row.timerName}"
									  />
                            
							</a:commandLink>
                        
						</s:div>
                    
					</rich:column>
                
				</ui:define>
            
			</ui:decorate>

        
		</s:div>

        <s:div
			 id="timerDiv"
			 >
			
            <s:div rendered="#{!empty node.currentTimer}">
				
                <ui:param
					 name="timer"
					 value="#{node.currentTimer}" />
                <wi:inputText
					 id="name"
					 value="#{node.timerName}"
					 label="Nome">
					
                    <a:ajax
						 execute="@this"
						 limitRender="true"
						 event="change"
						 render="timersTable" />
                
				</wi:inputText>
                <wi:inputText
					 id="duedate"
					 value="#{node.dueDateValue}"
					 
					 widthDiv="50px"
					 label="Prazo">
					
                    <a:ajax
						 execute="@this"
						 limitRender="true"
						 event="change" />
                
				</wi:inputText>

                <wi:selectOneMenuEnum
					 id="unit"
					 value="#{node.dueDateUnit}"
					 
					 widthDiv="100px"
					 label="Unidade"
					 items="#{node.dueDateDefaultUnit.values()}"
					 noSelectionLabel="[Selecione...]"
					 optionText="label">
					
                    <a:ajax
						 execute="@this"
						 limitRender="true"
						 event="change" />
                
				</wi:selectOneMenuEnum>

                <wi:selectBooleanCheckbox
					 id="business"
					 value="#{node.dueDateBusiness}"
					 
					 widthDiv="40px"
					 label="Comercial?">
					
                    <a:ajax
						 execute="@this"
						 limitRender="true"
						 event="change" />
                
				</wi:selectBooleanCheckbox>

                <wi:selectOneMenu
					 id="transition"
					 value="#{timer.transitionName}"
					 label="Transição"
					 items="#{node.getTransitions()}"
					 noSelectionLabel="[Selecione...]">
					
                    <a:ajax
						 execute="@this"
						 limitRender="true"
						 event="change" />
                
				</wi:selectOneMenu>
            
			</s:div>
        
		</s:div>

    
	</rich:panel>


</ui:composition>
