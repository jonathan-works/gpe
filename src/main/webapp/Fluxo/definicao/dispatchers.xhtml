<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf" >
    
    <h:form id="formDispatcher">
    	<wi:selectOneMenu id="dispatcher" valueItems="#{nodeFitter.signals}" label="${infoxMessages['process.events.listener.nome']}" 
    		showLabelSelecione="true" required="true" optionLabel="#{item.nome}" optionValue="#{item.codigo}"/>
    	
    	<a:commandButton limitRender="true" render="formListeners listenersDatatable" execute="@form" styleClass="buttons" 
    		value="${infoxMessages['process.events.listener.adicionar']}" actionListener="#{nodeFitter.addDispatcherSignal}" resetValues="true" style="margin-top: 1em;" >
    		<f:attribute name="dispatcherValue" value="#{rich:clientId('dispatcher')}" />
    	</a:commandButton>
    </h:form>
    
    <wi:dataTable id="listenersDatatable" values="#{nodeFitter.dispatchSignalEvents}" showSearchForm="false" hideOrder="true"
    	showGridCount="false">
    
    	<ui:define name="headerToolBar" />
    	
    	<ui:define name="toolBar">
    		<h:form rendered="false">
    			<a:commandLink render="listenersDatatablePanel formListeners" execute="@form" 
    				action="#{nodeFitter.removeCatchSignal(row)}" >
    				<h:graphicImage url="#{wiSkin.imageFolder}/remove.png" title="#{infoxMessages['button.delete']}" />
    			</a:commandLink>
    		</h:form>
    	</ui:define>
    	
    	<wi:columnOutputText columnId="nome" columnHeader="${infoxMessages['process.events.listener.nome']}" 
    		value="#{nodeFitter.getSignalLabel(row)}"/>
    	
    	<wi:columnOutputText columnId="transicao" columnHeader="${infoxMessages['process.events.listener.transicao']}" 
    		value="#{nodeFitter.getSignalTransition(row)}"/>
    		
    	<wi:columnOutputText columnId="condicao" columnHeader="${infoxMessages['process.events.listener.condicao']}" 
    		value="#{nodeFitter.getSignalCondition(row)}"/>
    
    </wi:dataTable>
    
</ui:composition>