<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:wi="http://www.itx.com.br/jsf"
    template="/WEB-INF/xhtml/templates/minimal.xhtml">

    <ui:define name="title">#{messages['importarXPDL.titlePage']}</ui:define>

    <ui:define name="body">

        <h:form id="uploadXPDL">

            <a:jsFunction name="chamarMetodo"
                action="#{processBuilder.importarXPDL(xpdlUploader.getData(), fluxoCrudAction.instance)}" />

            <ui:param name="template"
                value="#{wi:get(template, '/WEB-INF/xhtml/components/templates/edit.xhtml')}" />

            <s:decorate id="#{id}Decoration" template="#{template}"
                rendered="#{wi:get(rendered, true)}">
                <rich:fileUpload id="uploadArquivo" execute="@this"
                    status=":status" limitRender="true"
                    required="#{wi:get(required, false)}"
                    acceptedTypes="xpdl"
                    tipMessage="Somente arquivos XPDL"
                    maxFilesQuantity="1"
                    fileUploadListener="#{xpdlUploader.processFileUpload}"
                    immediateUpload="#{wi:get(immediateUpload, true)}"
                    listWidth="#{wi:get(listWidth, '260px')}"
                    listHeight="#{wi:get(listHeight, '58px')}"
                    noDuplicate="#{wi:get(noDuplicate, true)}"
                    onuploadcomplete="chamarMetodo();close();"
                    addLabel="Adicionar" clearAllLabel="Limpar Todos"
                    clearLabel="Limpar" uploadLabel="Processar"
                    doneLabel="Enviado"
                    sizeExceededLabel="Erro! Tamanho máximo 2MB."
                    validatorMessage="campo obrigatório."
                    requiredMessage="erro, campo obrigatorio"
                    disabled="#{disabled}">
                    <f:facet name="label">
                        <h:outputText value="{_KB}KB de {KB}KB" />
                    </f:facet>
                </rich:fileUpload>
            </s:decorate>
        </h:form>
    </ui:define>

</ui:composition>
